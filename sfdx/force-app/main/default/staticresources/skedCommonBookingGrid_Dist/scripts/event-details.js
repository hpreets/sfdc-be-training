!function(a){a.module("skedApp.core",[])}(angular),function(a){a.module("skedApp.shared",[])}(angular),function(a){a.module("skedApp.core").provider("api",function(){var b=!1,c={},d={};this.setController=function(a){c=a},this.setRemotingConfiguration=function(b){a.isObject(b)&&a.extend(d,b)},this.enableDebug=function(){b=!0},this.$get=["$q",function(e){var f={};return a.forEach(c,function(g,h){a.isFunction(g)?f[h]=function(){var f=e.defer(),i=[],j=[];return a.forEach(arguments,function(a){i.push(a),j.push(a)}),i.push(function(a,b){b.status?f.resolve(a):f.reject(b)}),i.push(d),g.apply(c,i),b&&console&&console.debug(h,j,new Date),f.promise}:f[h]=g}),f}]})}(angular),function(a){a.module("skedApp.core").provider("env",function(){var b={};this.setVariables=function(c){a.extend(b,c)},this.$get=[function(){return b}]})}(angular),function(a,b){a.module("skedApp.shared").factory("util",["$q","$rootScope","$document","$templateRequest","$compile","$timeout",function(b,c,d,e,f,g){var h={DEFAULT:0,SUCCESS:1,WARNING:2,ERROR:3},i=function(){c.loading=!0},j=function(){c.loading=!1},k=function(b){var d,h,i=b.constroller||{},j=function(c){var e=a.element('<div class="sked-modal-container"></div>'),j=a.element("<div ></div>"),k=a.element('<div class="slds-backdrop"></div>'),l=9010+(a.element(".sked-modal-container").length||0)+1;e.css("z-index",l),j.attr({role:"dialog",tabindex:-1,class:"slds-modal slds-fade-in-open slds-hide slds-modal--"+b.size}),j.append(c),j.appendTo(e),k.appendTo(e),f(j)(h),d.append(e),j.addClass("slds-show").removeClass("slds-hide").attr("aria-hidden","false").attr("tabindex",1),!0!==b.noBackdrop&&g(function(){k.addClass("slds-backdrop--open"),j.addClass("slds-fade-in-open")},25),i.closeModal=function(c,d){var f=function(){e.remove(),a.isFunction(d)&&d(),h&&h.$destroy&&a.isFunction(h.$destroy)&&h.$destroy()};!0!==b.noBackdrop?k.one("transitionend",f).removeClass("slds-backdrop--open"):f(),j.removeClass("slds-fade-in-open").attr("aria-hidden","true").attr("tabindex",-1),a.isFunction(c)&&c()}};return b&&(b.templateUrl||b.template)&&(d=b.appendTo||a.element("[ng-app]"),h=b.scope||c.$new(),b.templateUrl?e(b.templateUrl).then(j):b.template&&j(b.template)),i},l=function(b,d){var i=["otification","success","warning","error"],j=["","slds-theme--success","slds-theme--warning","slds-theme--error"],k=a.extend({templateUrl:"src/shared/toast-template.html",type:h.DEFAULT,icon:i[b.type||0],timeout:4e3},b),l=k.appendTo||a.element("[ng-app]"),m=d||c.$new();a.extend(m,k),e(k.templateUrl).then(function(b){var c=a.element(".slds-notify_container"),d=a.element('<div role="alert" class="slds-notify slds-notify--toast pc-toast-message slds-theme--alert-texture '+j[k.type]+'"></div>');0===c.length&&(c=a.element('<div class="slds-notify_container"></div>'),l.append(c)),d.append(b),d.prependTo(c),f(d)(m),g(function(){d.addClass("pc-toast-message-shown")},0),g(function(){d.one("transitionend",function(){d.remove()}).removeClass("pc-toast-message-shown")},k.timeout)})},m=function(a){return l({type:h.DEFAULT,message:a})},n=function(a){return l({type:h.SUCCESS,message:a})},o=function(a){return l({type:h.WARNING,message:a})},p=function(a){return l({type:h.ERROR,message:a})},q=function(d){var e=b.defer(),f=c.$new(),g=a.extend({templateUrl:"src/shared/confirm-modal-template.html",scope:f},d),h=k(g);return f.title=d.title||"Confirmation",f.message=d.message||"Are you sure?",f.confirm=function(){h.closeModal(),e.resolve("confirmed")},f.dismiss=function(){h.closeModal(),e.reject("cancelled")},e.promise};return{showLoading:i,hideLoading:j,showModal:function(d,e){var f,g=b.defer(),h=d.scope||c.$new(),i=a.extend({scope:h},d);return e&&a.extend(h,e),f=k(i),h.closeModal=function(a){f.closeModal(null,function(){g.resolve(a)})},g.promise},confirm:q,toastBasic:m,toastSuccess:n,toastWarning:o,toastError:p,isNullOrEmpty:function(b){return a.isUndefined(b)||null===b||""===b},searchOptionsByName:function(a,b,c){return c=c||"name",b=_.isUndefined(b)?"":String(b),_.filter(a,function(a){return a[c].toLowerCase().indexOf(b.toLowerCase())>-1})},formatDuration:function(a){var b=1440,c=60,d=Math.floor(a/b);a-=d*b;var e=Math.floor(a/c);a-=e*c;var f=[];return d>0&&f.push(d+" Day"+(d>1?"s":"")),e>0&&f.push(e+" Hour"+(e>1?"s":"")),a>=0&&f.push(a+" Minute"+(a>1?"s":"")),f.join(" ")}}}])}(angular,jQuery),function(a,b,c){a.module("skedApp.shared").factory("dateUtil",["$filter",function(b){var d=b("date"),e=function(a){var b=/^\d{4}\-(0[1-9]|1[0-2])\-(0[1-9]|[1-2][0-9]|3[0-1])$/;return a&&b.test(a)},f=function(a){var b;return e(a)?(b=a.split("-"),new Date(parseInt(b[0],10),parseInt(b[1],10)-1,parseInt(b[2],10))):null},g=function(a,b){return b=b||"yyyy-MM-dd",d(a,b)};return{isDateStringValid:e,parseDateString:f,addDay:function(b,c){return a.isDate(b)&&a.isNumber(c)?new Date(b.getTime()+864e5*c):null},dateToString:g,getMinuteValue:function(a){return 60*Math.floor(a/100)+Math.round(a%100)},getTimeValue:function(a){return tsH=Math.floor(a/60),tsM=Math.round(a%60),100*tsH+tsM},sumDuration:function(a,b){return 60*a+b},splitDuration:function(a){return a=Number(a),{hour:Math.floor(a/60),minute:a%60}},isToday:function(a){return c(a).isSame(c(),"days")},calculateWeekDay:function(a){return{start:g(c(a).startOf("week").toDate()),end:g(c(a).endOf("week").toDate())}}}}])}(angular,jQuery,moment),function(a){a.module("skedApp.shared").filter("skedSfUrl",["env",function(b){var c=a.copy(b.RESOURCE_PATH)||"/";"/"!==c.charAt(c.length-1)&&(c+="/");var d=a.copy(b.DIST_PATH)||"/";return"/"!==d.charAt(d.length-1)&&(d+="/"),function(b,e){if(e=e||"vendor",a.isString(b)){if("/"===b.charAt(0)&&(b=b.substring(1)),"vendor"===e)return c+b;if("dist"===e)return d+b}}}])}(angular),function(a){a.module("skedApp.shared").filter("skedTimeName",[function(){return function(b){var c,d,e,f;return a.isNumber(b)?(c=Math.floor(b/100),tsM=Math.round(b%100),c>12?(d=""+(c-12),f="PM"):(d=""+c,f=12===c?"PM":"AM"),e="00"+tsM,e=e.substr(e.length-2),d+":"+e+" "+f):""}}])}(angular),function(a){a.module("skedApp.shared").directive("skedInput",[function(){var b={DATE_PICKER:"date-picker",MONTH_PICKER:"month-picker",TIME_PICKER:"time-picker",TEXT:"text",LOOKUP:"lookup",SELECT:"select",TEXTAREA:"textarea"},c=function(a){var b="",c="",d="",e="",f="";return a.pattern&&(b='ng-pattern="'+a.pattern+'"'),a.title&&(c='ng-attr-title="'+a.title+'"'),a.placeholder&&(d='placeholder="'+a.placeholder+'"'),a.icon&&(e='<div class="slds-input-has-icon slds-input-has-icon_left" style="position: relative;z-index: 9000"><svg aria-hidden="true" class="slds-input__icon input-text-default"><use  xlink:href="" ng-attr-xlink:href="'+a.icon+'"></use></svg>'),a.image&&(f='<div class="slds-input-has-icon slds-input-has-icon_left" style="position: relative;z-index: 9000"><img ng-src="'+a.image+'" class="slds-input__image slds-avatar--small"/>'),['<div class="slds-form-element__control '+a.inputClasses+'">',a.icon?e:"",a.image?f:"",'<input type="'+a.type+(a.id?'" id="'+a.id:"")+'" name="'+a.name+'" class="slds-input" '+(a.onChange?' ng-change="'+a.onChange+'" ':"")+' ng-model="'+a.model+'" '+c+" "+d+" "+(a.modelOptions?' ng-model-options="'+a.modelOptions+'" ':"")+' ng-readonly="'+a.readonly+'" ng-required="'+a.required+'" '+b+" "+(a.minValue?'ng-min="'+a.minValue+'"':"")+" "+(a.maxValue?'ng-max="'+a.maxValue+'"':"")+" />",a.icon||a.image?"</div>":"","</div>"].join("")},d=function(a){var b="",c="",d="";if(a.maxLength&&(b='maxlength="'+a.maxLength+'" '),a.rows&&(c='rows="'+a.rows+'" '),a.icon)var d=['<span class="slds-icon_container">','<svg class="slds-icon slds-icon--x-small" aria-hidden="true">','<use xlink:href="" ng-attr-xlink:href="'+a.icon+'" />',"</svg>","</span>"].join("");return['<div class="slds-form-element__control">','<div class="textarea-has-icon">','<textarea class="slds-textarea" id="'+a.id+'" name="'+a.name+'" '+(a.onChange?' ng-change="'+a.onChange+'" ':"")+' ng-model="'+a.model+'" '+(a.modelOptions?' ng-model-options="'+a.modelOptions+'" ':"")+' ng-readonly="'+a.readonly+'" ng-required="'+a.required+'" '+c+b+"/>",d,"</div>","</div>"].join("")},e=function(a){var b="";return a.title&&(b='ng-attr-title="'+a.title+'"'),['<div class="slds-form-element__control">','<div class="slds-select_container">',"<select "+(a.onChange?' ng-change="'+a.onChange+'" ':"")+(a.id?' id="'+a.id+'" ':"")+' name="'+a.name+'" class="slds-select" ng-model="'+a.model+'" '+b+' ng-required="'+a.required+'" ng-disabled="'+a.disabled+'" ng-options="'+a.selectOptions+'">',a.selectNullOption?'<option value="" '+(a.required?'disabled="disabled" ':" ")+">"+a.selectNullOption+"</option>":"","</select>","</div>","</div>"].join("")},f=function(a){return a.dateOptions||(a.dateOptions=""),['<div class="slds-form-element__control">','<div class="slds-input-has-icon slds-input-has-icon--left" style="position: relative;z-index: 9000">','<svg aria-hidden="true" class="slds-input__icon input-text-default">','<use  xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use>',"</svg>",'<input name="'+a.name+'" class="slds-input" type="text" ui-date="'+a.dateOptions+'" ng-model="'+a.model+'" ng-readonly="'+a.readonly+'" ng-required="'+a.required+'" '+(a.modelOptions?' ng-model-options="'+a.modelOptions+'" ':"")+NaN,"</div>","</div>"].join("")},g=function(a){return a.monthOptions||(a.monthOptions="{}"),['<div class="slds-form-element__control">','<div class="slds-input-has-icon slds-input-has-icon--left" style="position: relative;z-index: 9000">','<svg aria-hidden="true" class="slds-input__icon input-text-default">','<use  xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#monthlyview\' | skedSfUrl}}"></use>',"</svg>",'<input name="'+a.name+'" class="slds-input" type="text" sked-month-picker="'+a.monthOptions+'" ng-model="'+a.model+'" ng-readonly="'+a.readonly+'" ng-required="'+a.required+'" />',"</div>","</div>"].join("")},h=function(a){return a.timeOptions||(a.timeOptions=""),['<div class="slds-form-element__control">','<div class="slds-input-has-icon slds-input-has-icon--left">','<svg aria-hidden="true" class="slds-input__icon input-text-default">','<use  xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#clock\' | skedSfUrl}}"></use>',"</svg>",'<input name="'+a.name+'" class="slds-input" type="text" sked-time-picker="'+a.timeOptions+'" ng-model="'+a.model+'" ng-readonly="'+a.readonly+'" '+(a.required?'required="required"':"")+" />","</div>","</div>"].join("")};return{restrict:"E",replace:!0,template:function(i,j){var k,l,m=[],n=j.type||"text",o=j.label,p=j.model,q=j.inputTitle,r=j.modelOptions,s=j.id,t=j.name,u=j.icon,v=j.image,w=j.placeholder,x="",y=j.isRequired,z=j.isReadonly||!1,A=j.isDisabled||!1,B=j.dateOptions,C=j.monthOptions,D=j.timeOptions,E=j.selectOptions,F=j.selectNullOption,G=j.pattern,H=j.onChange,I=j.minValue,J=j.maxValue,K=j.rows,L=j.inputClasses,M=j.maxLength,N=i.parents("ng-form, [ng-form]"),O="",P="",Q={};switch(N&&N.length>0&&(k=a.element(N.get(0)),l=k.attr(k.is("[ng-form]")?"ng-form":"name")),l&&t&&(O="ng-class=\"{'slds-has-error': "+l+".$submitted && "+l+"."+t+'.$invalid}"'),o&&y&&(P='<abbr class="slds-required" title="required">*</abbr> '),m.push('<div class="slds-form-element '+x+'" '+O+">"),o&&m.push('<label class="slds-form-element__label" for="'+s+'">'+P+o+"</label>"),Q={name:t,model:p,title:q,icon:u,image:v,placeholder:w,modelOptions:r,required:y,readonly:z,disabled:A,pattern:G,onChange:H,minValue:I,maxValue:J,maxLength:M,inputClasses:L},n){case b.DATE_PICKER:a.merge(Q,{dateOptions:B}),m.push(f(Q));break;case b.MONTH_PICKER:a.merge(Q,{monthOptions:C}),m.push(g(Q));break;case b.TIME_PICKER:a.merge(Q,{timeOptions:D}),m.push(h(Q));break;case b.SELECT:a.merge(Q,{id:s,selectOptions:E,selectNullOption:F}),m.push(e(Q));break;case b.TEXTAREA:a.merge(Q,{id:s,rows:K}),m.push(d(Q));break;default:a.merge(Q,{id:s,type:n}),m.push(c(Q))}return m.push("</div>"),m.join("")}}}])}(angular),function(a){a.module("skedApp.shared").directive("skedInputLookup",["$timeout","$q",function(b,c){return{restrict:"E",replace:!0,templateUrl:"src/shared/input-lookup-template.html",scope:{label:"@?",iconUrl:"@?",imageField:"@?",defaultImage:"@?",placeholder:"@?",iconClass:"@?",labelField:"@",metaField:"@",required:"@?isRequired",searchFn:"&search",onChange:"&?",model:"=",isInvalid:"=",isReadonly:"="},link:function(d,e,f){var g=e.find("input[type=text]");d.isOpen=!1,d.required=!!d.required,d.selectLookupItem=function(c){d.searchString="",d.model=c,d.isOpen=!1,a.isFunction(d.onChange)&&b(function(){d.onChange()})},d.resetLookupItem=function(){d.model=null,a.isFunction(d.onChange)&&b(function(){d.onChange()})},d.focusLookupInput=function(){g&&g.length>0&&b(function(){g.focus()},10)},d.search=function(){c.when(d.searchFn({searchString:d.searchString})).then(function(a){d.searchResults=a}).catch(function(){d.searchResults=null})}}}}])}(angular),function(a){a.module("skedApp.shared").directive("skedInputPopup",["util","$timeout",function(b,c){return{restrict:"E",replace:!0,templateUrl:"src/shared/input-popup-template.html",scope:{label:"@?",labelField:"@?",model:"=",resolver:"=popupResolver",templateUrl:"@popupTemplateUrl"},link:function(c,d,e){var f=c.resolver||{},g=c.templateUrl,h=c.labelField,i=!1,j=function(b){return a.isObject(b)&&h?b[h]:b.toString?b.toString():""};c.inputView="",c.openPopup=function(){g&&!i&&(i=!0,b.showModal({templateUrl:g},f).finally(function(){i=!1}))},c.$watch("model",function(b){var d=[];b?a.isArray(b)?(a.forEach(b,function(a){d.push(j(a))}),c.inputView=d.join(", ")):c.inputView=j(b):c.inputView=""},!0)}}}])}(angular),function(a){a.module("skedApp.shared").directive("skedMultiPicklist",["util",function(b){return{restrict:"E",replace:!0,templateUrl:"src/shared/multi-picklist-template.html",scope:{isRequired:"@?",isInvalid:"=",isReadonly:"=",listPosition:"@?",label:"@?",selectOptions:"@",model:"=",labelField:"@",metaField:"@"},link:function(b,c,d){var e=/^(.*)\s+as\s+(.*)\s+for\s+(.*)\s+in\s+(.*)$/i,f=e.exec(b.selectOptions),g=f[1],h=f[2],i=f[3],j=f[4],k=b.metaField||"id",l=function(){var c="",d={};return a.isArray(b.selectedOptions)&&b.selectedOptions.length>0&&(1===b.selectedOptions.length?(d[i]=b.selectedOptions[0],c=b.$parent.$eval(h,d)):b.selectedOptions.length>1&&(c=b.selectedOptions.length+" selected")),c};b.selectionLabel="",b.selectedOptions=[],b.isRequired=!!b.isRequired,b.toggleOptionSelection=function(c){var d,e,f,h,j={},m=b.selectedOptions.indexOf(c);j[i]=c,f=b.$parent.$eval(g,j),h=f[k],-1===m?b.selectedOptions.push(c):b.selectedOptions.splice(m,1),a.isArray(b.model)||(b.model=[]),e=b.model.map(function(a){return a[k]}),d=e.indexOf(h),-1===d?b.model.push(f):b.model.splice(d,1),b.selectionLabel=l()},b.getOptionLabel=function(a){var c={};return c[i]=a,b.$parent.$eval(h,c)},b.$watchCollection(function(){return b.$parent.$eval(j)},function(c){var d;b.optionList=c,b.selectedOptions=[],a.isArray(c)&&c.length>0&&(d=c.map(function(a){return a[k]}),a.isArray(b.model)&&b.model.length>0&&a.forEach(b.model,function(a){var e=d.indexOf(a[k]);e>-1&&b.selectedOptions.push(c[e])})),b.selectionLabel=l()},!0)}}}])}(angular),function(a){a.module("skedApp.shared").directive("skedPaging",[function(){return{restrict:"E",replace:!0,templateUrl:"src/shared/pagin-template.html",scope:{recordCountOptions:"<",list:"=",model:"=",recordNumberLabel:"@?",pageNavLabel:"@?"},link:function(b,c,d){var e=function(){b.model=_.extend({pageNumber:1,totalPages:1,pageSize:20,numberOfPagesArray:[]},b.model),b.model.noOfRecords=0,a.isArray(b.list)&&(b.model.noOfRecords=b.list.length,a.isArray(b.recordCountOptions)||(b.recordCountOptions=[b.model.noOfRecords],b.model.pageSize=b.recordCountOptions[0])),b.model.pageSize&&b.model.pageSize>0&&(b.model.totalPages=Math.ceil(b.model.noOfRecords/b.model.pageSize)),b.model.totalPages<1&&(b.model.totalPages=1),(!a.isNumber(b.model.pageNumber)||b.model.pageNumber<1)&&(b.model.pageNumber=1),b.model.totalPages<b.model.pageNumber&&(b.model.pageNumber=b.model.totalPages),b.numberOfPagesArray=[];for(var c=1;c<=b.model.totalPages;c++)b.numberOfPagesArray.push(c)},f=function(c){a.isNumber(c)&&c>0&&c<=b.model.totalPages?b.model.pageNumber=c:b.model.pageNumber=1},g=function(){f(b.model.pageNumber+1)},h=function(){f(b.model.pageNumber-1)};b.goToPage=f,b.goToNextPage=g,b.goToPreviousPage=h,b.resetPaginInfo=e,b.$watch("recordCountOptions",e),b.$watchCollection("list",e,!0)}}}])}(angular),function(a){a.module("skedApp.shared").directive("skedTimePicker",["dateUtil","$timeout",function(b,c){var d="h:i A",e=function(a,b){var c,e;return b||(b=d),c=b,c=c.replace(/h/g,"(0?[0-9]|1[0-2])"),c=c.replace(/i/g,"([0-5][0-9])"),c=c.replace(/[aA]/g,"(am|AM|pm|PM)"),e=new RegExp("^"+c+"$"),e.test(a)},f=function(a,b){var c,f,g,h,i,j,k,l,m,n="(0?[0-9]|1[0-2])",o="([0-5][0-9])",p="(am|AM|pm|PM)";return b||(b=d),b=b.toLowerCase(),a=a?a.trim():"",e(a,b)?(h=b.indexOf("h"),i=b.indexOf("i"),j=b.indexOf("a"),c=b.replace(/([^hia])/g,"($1)"),c=c.replace(/h/g,n),c=c.replace(/i/g,o),c=c.replace(/a/g,p),f=new RegExp(c),g=f.exec(a),k=parseInt(g[h+1],10),l=parseInt(g[i+1],10),m=g[j+1],12===k&&(k=0),100*(k+("pm"===m.toLowerCase()?12:0))+l):null};return{restrict:"A",require:"?ngModel",link:function(b,c,g,h){var i=function(){var c={timeFormat:d,appendTo:"[ng-app]",forceRoundTime:!0,selectOnBlur:!0};return a.extend({},c,b.$eval(g.skedTimePicker))},j=function(){var a=i();h&&(h.$validators.skedTimeValidator=function(a,b){return e(b)},h.$parsers.push(function(a){return f(a)}),h.$formatters.push(function(a){var b="000"+a;return c.timepicker("setTime",b.substr(-4)),c.val()}),h.$render=function(){var a="000"+h.$modelValue;c.timepicker("setTime",a.substr(-4))}),c.data("timepicker")?c.timepicker("option",a):(c.timepicker(a),c.on("$destroy",function(){c.timepicker("hide"),c.timepicker("remove")}),c.on("changeTime",function(a){const b=a.target.value;h.$modelValue||h.$setViewValue(b)})),h&&h.$render()};b.$watch(i,j,!0)}}}])}(angular),function(a,b){a.module("skedApp.shared").directive("skedMovingPopover",["$templateRequest","$compile","$window",function(c,d,e){return{scope:{templateUrl:"@skedMovingPopover",$data:"=skedMovingPopoverData",containerSelector:"@skedMovingPopoverContainer",beIgnored:"=skedMovingPopoverIgnore"},link:function(f,g,h){var i,j=(f.beIgnored,a.element(f.containerSelector||"[ng-app]")),k=j.offset(),l=10;f.$watch(function(){return f.beIgnored},function(a,h){a?(g.off("mouseenter mousemove mouseleave"),b(".slds-popover").css({display:"none",left:"",top:""})):g.on("mouseenter mousemove mouseleave",function(a){var b,g,h,m,n,o,p=a.type;switch(h=e.innerHeight,m=e.innerWidth,p){case"mouseenter":i?i.css("display","none"):c(f.templateUrl).then(function(a){i=d(a)(f),i.css("display","none"),i.css("position","absolute"),i.appendTo(j),i.on("mouseenter mousemove",function(a){a.stopPropagation()})});break;case"mousemove":i&&i.length>0&&(b=i.height(),g=i.width(),n=a.pageX-k.left+l,o=a.pageY-k.top+l,g+a.clientX+2*l>m&&(n-=g+l),b+a.clientY+2*l>h&&(o-=b+l),i.css({display:"block",left:n,top:o}));break;case"mouseleave":i&&i.css({display:"none",left:"",top:""})}})})}}}])}(angular,jQuery),function(a,b,c){a.module("app.model",["skedApp.shared"]).factory("model",["dateUtil","util",function(b,d){function e(){this.id=null,this.name=null,this.userId=null,this.region=null,this.photoUrl=null,this.category=null,this.employmentType=null}function f(a){this.id=a,this.name=null,this.timezoneSidId=null}function g(){this.regions=null,this.jobTypes=null,this.tourTypes=null,this.jobURL=null,this.defaultDuration=120,this.minDuration=60,this.intStartTime=800,this.intEndTime=1700,this.statusColorSettings=[],this.statusColorSettingMap={},this.statusGridColorSettings=[],this.statusGridColorSettingMap={},this.cancellationReasons=[],this.stabilizedHomeScheduledTime=1,this.specialStabilizedHomeScheduledTime=1,this.specialRegions=[]}function h(){this.id=null,this.label=null,this.selected=!1}function i(){this.id=null,this.label=null,this.selected=!1}function j(){this.id=null,this.label=null,this.selected=!1}function k(){this.id=null,this.name=null,this.address=null,this.status=null}function l(){this.id=null,this.label=null,this.name=null,this.selected=!1}function m(){this.id=null,this.label=null,this.name=null,this.selected=!1,this.requireComments=!1}function n(){this.id=null,this.backgroundColor=null,this.color=null}function o(){this.id=null,this.resourceId=null,this.resource=null,this.distanceInMiles=null,this.travelTime=null,this.noHomeAddress=!1,this.status=null,this.color=null,this.backgroundColor=null}function p(){this.id=null,this.tourId=null,this.name=null,this.dateOfEvent=null,this.startTime=null,this.endTime=null,this.duration=null,this.jobType=null,this.tourType=null,this.jobStatus=null,this.jobLocation=null,this.region=null,this.account=null,this.home=null,this.suite=null,this.room=null,this.account=null,this.description=null,this.allocations=null,this.offsetTime=0,this.durationInHours=null,this.durationInMinutes=null}function q(){this.id=null,this.jobId=null,this.name=null,this.homeName=null,this.tourDate=null,this.startTime=null,this.endTime=null,this.jobStatus=null,this.cancelled=!1,this.touredBy=null}function r(a){this.fullAddress=a,this.placeId=null,this.longitude=null,this.latitude=null,this.city=null,this.state=null,this.zip=null,this.territory=null}function s(){this.isHoliday=!1,this.dayOfWeek=null,this.dateISO=null,this.timeSlots=[],this.isToday=null,this.shortDayOfWeekString=null,this.shortDateString=null}function t(){this.totalResources=0,this.numOfAvailableResources=0,this.dateISO=null,this.startTime=null,this.endTime=null,this.startTimeString=null,this.endTimeString=null,this.color=null,this.backgroundColor=null,this.isAvailable=!1,this.isAssigned=!1,this.isTourBooked=!1}var u={UNAVAILABLE:"Unavailable",AVAILABLE:"Available",BOOKED_TOUR:"BookedTour",EXISIT_TOUR:"ExistTour"},v=function(a,b,c,d){if(d=d||"",a&&b&&c){var e=b[c];return e&&(a[d?d+"Color":"color"]=e.color,a[d?d+"BackgroundColor":"backgroundColor"]=e.backgroundColor),a}},w=function(b,c,d){var e=[];return a.isArray(b)&&b.length>0&&(e=b.map(function(e){return a.isString(c)&&a.isObject(e)||a.isNumber(c)&&a.isArray(e)?a.isFunction(e[c])?e[c].apply(e,d):e[c]||null:a.isFunction(c)?c(e,b)||null:e})),e};return e.fromServer=function(a){var b=null;return a&&(b=new e,b.id=a.id,b.name=a.name,b.userId=a.userId,b.region=f.fromServer(a.region),b.photoUrl=a.photoUrl,b.category=a.category,b.employmentType=a.employmentType),b},e.fromServerList=function(a){return w(a,e.fromServer)},e.prototype.toServer=function(){return{id:this.id}},f.fromServer=function(a){var b=null;return a&&(b=new f(a.id),b.name=a.name||a.label,b.timezoneSidId=a.timezoneSidId),b},f.fromServerList=function(a){return w(a,f.fromServer)},f.prototype.toServer=function(){return{id:this.id,timezoneSidId:this.timezoneSidId}},g.fromServer=function(a){var b=null;return a&&(b=new g,b.jobTypes=l.fromServerList(a.jobTypes),b.tourTypes=l.fromServerList(a.tourTypes),b.regions=f.fromServerList(a.regions),b.jobURL=a.jobURL,d.isNullOrEmpty(a.defaultDuration)||(b.defaultDuration=Number(a.defaultDuration)),d.isNullOrEmpty(a.minDuration)||(b.minDuration=Number(a.minDuration)),d.isNullOrEmpty(a.stabilizedHomeScheduledTime)||(b.stabilizedHomeScheduledTime=Number(a.stabilizedHomeScheduledTime)),d.isNullOrEmpty(a.specialStabilizedHomeScheduledTime)||(b.specialStabilizedHomeScheduledTime=Number(a.specialStabilizedHomeScheduledTime)),d.isNullOrEmpty(a.specialRegion)||(b.specialRegions=a.specialRegion),d.isNullOrEmpty(a.intStartTime)||(b.intStartTime=Number(a.intStartTime)),d.isNullOrEmpty(a.intEndTime)||(b.intEndTime=Number(a.intEndTime)),d.isNullOrEmpty(a.statusColorSettings)||(b.statusColorSettings=n.fromServerList(a.statusColorSettings),b.statusColorSettingMap=_.keyBy(b.statusColorSettings,"id")),d.isNullOrEmpty(a.statusGridColorSettings)||(b.statusGridColorSettings=n.fromServerList(a.statusGridColorSettings),b.statusGridColorSettingMap=_.keyBy(b.statusGridColorSettings,"id")),d.isNullOrEmpty(a.cancellationReasons)||(b.cancellationReasons=m.fromServerList(a.cancellationReasons))),b},h.fromServer=function(a){var b=null;return a&&(b=new h,b.id=a.id,b.label=a.label||a.name,b.name=a.name||a.label,b.account=l.fromServer(a.account),b.region=f.fromServer(a.region)),b},h.fromServerList=function(a){return w(a,h.fromServer)},h.prototype.toServer=function(){return{id:this.id}},i.fromServer=function(a){var b=null;return a&&(b=new i,b.id=a.id,b.label=a.label||a.name,b.name=a.name||a.label,b.contact=l.fromServer(a.contact),b.region=f.fromServer(a.region),b.jobLocation=r.fromServer(a.jobLocation)),b},i.fromServerList=function(a){return w(a,i.fromServer)},i.prototype.toServer=function(){return{id:this.id}},j.fromServer=function(a){var b=null;return a&&(b=new j,b.id=a.id,b.label=a.label||a.name,b.name=a.name||a.label),b},j.fromServerList=function(a){return w(a,j.fromServer)},j.prototype.toServer=function(){return{id:this.id}},k.fromServer=function(a){var b=null;return a&&(b=new k,b.id=a.id,b.name=a.name||a.label,b.address=r.fromServer(a.address),b.status=a.status),b},k.fromServerList=function(a){return w(a,k.fromServer)},k.prototype.toServer=function(){return{id:this.id,name:this.name}},l.fromServer=function(a){var b=null;return a&&(b=new l,b.id=a.id,b.label=a.label||a.name,b.name=a.name||a.label,b.selected=!!a.selected),b},l.fromServerList=function(a){return w(a,l.fromServer)},l.prototype.toServer=function(){return{id:this.id,name:this.name||this.label}},m.fromServer=function(a){var b=null;return a&&(b=new m,b.id=a.id,b.label=a.label||a.name,b.name=a.name||a.label,b.selected=!!a.selected,b.requireComments=!!a.requireComments),b},m.fromServerList=function(a){return w(a,m.fromServer)},m.prototype.toServer=function(){return{id:this.id}},n.fromServer=function(a){var b=null;return a&&(b=new n,b.id=a.id,b.backgroundColor=a.backgroundColor,b.color=a.color),b},n.fromServerList=function(a){return w(a,n.fromServer)},o.fromServer=function(a,b){var c=null;return a&&(c=new o,c.id=a.id,c.resourceId=a.resource?a.resource.id:null,c.resource=e.fromServer(a.resource)||{},c.distanceInMiles=a.distanceInMiles,c.travelTime=a.travelTime,c.noHomeAddress=!!a.noHomeAddress,c.status=a.status,c.distanceText=Math.round(a.distanceInMiles)+" Miles",c.travelTimeText=d.formatDuration(a.travelTime||0)),b&&v(c,b.statusColorSettingMap,c.status),c},o.fromServerList=function(a,b){return a.map(function(a){return o.fromServer(a,b)})},o.prototype.fetchDataFromAllocation=function(a){a&&(this.status=a.status)},o.prototype.toServer=function(){return{id:this.id,resource:this.resource?this.resource.toServer():null}},p.fromServer=function(a,c){var d=null;return a&&(d=new p,d.id=a.id,d.tourId=a.tourId,d.name=a.name,d.dateOfEvent=a.dateOfEvent,d.startTime=a.startTime,d.endTime=a.endTime,d.duration=a.duration,d.durationInHours=b.splitDuration(a.duration).hour,d.durationInMinutes=b.splitDuration(a.duration).minute,d.jobType=a.jobType,d.tourType=a.tourType,d.jobStatus=a.jobStatus,d.jobLocation=r.fromServer(a.jobLocation),d.region=f.fromServer(a.region),d.account=l.fromServer(a.account),d.contact=l.fromServer(a.contact),d.home=k.fromServer(a.home),d.suite=l.fromServer(a.suite),d.room=l.fromServer(a.room),d.opportunity=h.fromServer(a.opportunity),d.description=a.description,d.allocations=o.fromServerList(a.allocations,c),d.offsetTime=a.offsetTime||0),d},p.fromServerList=function(a,b){return a.map(function(a){return p.fromServer(a,b)})},p.prototype.toServer=function(){return{id:this.id,dateOfEvent:b.dateToString(this.dateOfEvent),startTime:this.startTime,endTime:this.endTime,duration:b.sumDuration(this.durationInHours,this.durationInMinutes),jobType:this.jobType,tourType:this.tourType,jobLocation:this.jobLocation?this.jobLocation.toServer():null,region:this.region?this.region.toServer():null,account:this.account?this.account.toServer():null,contact:this.contact?this.contact.toServer():null,home:this.home?this.home.toServer():null,suite:this.suite?this.suite.toServer():null,room:this.room?this.room.toServer():null,opportunity:this.opportunity?this.opportunity.toServer():null,offsetTime:this.offsetTime,description:this.description,allocations:this.allocations?this.allocations.map(function(a){return a.toServer()}):[]}},q.fromServer=function(a){var b=null;return a&&(b=new q,b.id=a.id,b.jobId=a.jobId,b.name=a.name,b.homeName=a.homeName,b.tourDate=a.tourDate,b.startTime=a.startTime,b.endTime=a.endTime,b.jobStatus=a.jobStatus,b.cancelled=!!a.cancelled,b.touredBy=a.touredBy),b},q.fromServerList=function(a){return w(a,q.fromServer)},r.fromServer=function(a){var b=null;return a&&(a.fullAddress||a.address)&&(b=new r(a.fullAddress||a.address),b.placeId=a.placeId,b.latitude=a.latitude,b.longitude=a.longitude,b.city=a.city,b.state=a.state,b.zip=a.zip,b.territory=a.territory),b},r.fromServerList=function(a){return w(a,r.fromServer)},r.prototype.toServer=function(){return{fullAddress:this.fullAddress,latitude:this.latitude,longitude:this.longitude,city:this.city,state:this.state,zip:this.zip,territory:this.territory,placeId:this.placeId}},s.fromServer=function(a,d,e){var f=null;if(a){f=new s,f.isHoliday=!!a.isHoliday,f.dayOfWeek=a.dayOfWeek,f.dateISO=a.dateISO;var g=b.parseDateString(a.dateISO);f.isToday=b.isToday(g),f.shortDayOfWeekString=c(g).format("ddd"),f.shortDateString=c(g).format("MMM DD, YYYY"),f.timeSlots=t.fromServerList(a.timeSlots,d,e)}return f},s.fromServerList=function(a,b,c){return a.map(function(a){return s.fromServer(a,b,c)})},t.fromServer=function(a,b,d){var e=null;if(a&&(e=new t,e.totalResources=a.totalResources,e.numOfAvailableResources=a.numOfAvailableResources,e.dateISO=a.dateISO,e.startTime=a.startTime,e.endTime=a.endTime,e.startTimeString=c(String("0000"+e.startTime).slice(-4),"HHmm").format("h:mm A"),e.endTimeString=c(String("0000"+e.endTime).slice(-4),"Hmm").format("h:mm A"),e.isAvailable=!!e.numOfAvailableResources&&Number(e.numOfAvailableResources)>0,e.isTourBooked=!!a.tourBooked),d&&(e.isAssigned=e.dateISO===d.dateOfEvent&&e.startTime===d.startTime&&e.endTime===d.endTime),e.isTourBooked=!e.isAssigned&&e.isTourBooked,b){var f,g;e.isAssigned?f=u.BOOKED_TOUR:e.isTourBooked?f=u.EXISIT_TOUR:e.isAvailable?(f=u.AVAILABLE,g=u.BOOKED_TOUR):f=u.UNAVAILABLE,v(e,b.statusGridColorSettingMap,g,"hover"),v(e,b.statusGridColorSettingMap,f)}return e},t.fromServerList=function(a,b,c){return a.map(function(a){return t.fromServer(a,b,c)})},t.prototype.isTimeslotAssigned=function(a){if(!a)return!1},{PickListItemModel:l,CancellationReasonModel:m,ResourceModel:e,RegionModel:f,EventModel:p,EventInListModel:q,HomeModel:k,EventDetailConfigModel:g,AddressModel:r,CalendarDayModel:s,CalendarTimeSlotModel:t,ResourceAllocationModel:o,OpportunityModel:h,AccountModel:i,ColorSettingModel:n}}])}(angular,jQuery,moment),function(a){a.module("app.cancelEvent",["ngSanitize","skedApp.core","skedApp.shared","app.model"]).config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}])}(angular),function(a,b,c){a.module("app.cancelEvent").component("cancelEvent",{templateUrl:"src/app/event-details/cancel-event-template.html",bindings:{config:"<?",eventId:"<?",jobStatus:"<?",cancelled:"<?",allowPostingMessage:"<?",onClose:"&?"},controller:["$scope","$timeout","$window","$location","$q","$filter","api","util","model",function(c,d,e,f,g,h,i,j,k){var l=this,m=f.search(),n={QUEUED:"Queued",PENDING_ALLOCATION:"Pending Allocation",PENDING_DISPATCH:"Pending Dispatch",DISPATCHED:"Dispatched",READY:"Ready",EN_ROUTE:"En Route",ON_SITE:"On Site",IN_PROGRESS:"In Progress",COMPLETE:"Complete",CANCELLED:"Cancelled"},o=function(a){return j.toastError("Can not perform action due to server error."),g.reject(a)},p=function(){l.contentLoading=!0},q=function(){l.contentLoading=!1},r=function(){return i.getCancellationReasons().catch(o)},s=function(){return i.cancelTour(l.eventId,l.cancellationReason.id,j.isNullOrEmpty(l.comments)?"":l.comments).catch(o)},t=function(a,b){j.showModal({
templateUrl:"src/app/cancel-event/error-prompt-template.html",noBackdrop:!!b},{message:a,closePrompt:function(a){a.closeModal(),v("cancel")}})},u=function(c,d){l.allowPostingMessage&&b&&b.postMessage&&b.postMessage(a.extend({message:c},d),l.parentDomain)},v=function(b){b||(b="cancel"),l.isModalOpen=!1,u(b),a.isFunction(l.onClose)&&l.onClose({message:b})},w=function(){return p(),s().then(function(a){if(!a.success)return g.reject(a);v("done")}).finally(q)},x=function(){return!!(l.eventId&&l.cancellationReason&&l.cancellationReason.id)},y=function(){var a=[n.CANCELLED,n.COMPLETE,n.IN_PROGRESS];return l.eventId&&!l.cancelled&&-1===a.indexOf(l.jobStatus)},z=function(){return r().then(function(a){return a&&a.success?(l.config={cancellationReasons:k.CancellationReasonModel.fromServerList(a.data)},l.config):g.reject(a)})};l.$onInit=function(){l.eventId=l.eventId||m.eventId,l.jobStatus=l.jobStatus||m.jobStatus,l.parentDomain=m.parent_domain||"*",y()?(l.config?l.cancellationReason=_.find(l.config.cancellationReasons,{selected:!0}):(p(),z().then(function(){l.cancellationReason=_.find(l.config.cancellationReasons,{selected:!0})}).finally(q)),d(function(){l.isModalOpen=!0},0)):t("You cannot cancel a job with status In Progress, Complete or Cancelled.",!0),u("loaded")},function(){l.eventId=null,l.jobStatus=null,l.parentDomain=null,l.cancellationReason=null,l.comments="",l.contentLoading=!1,l.closeModal=v,l.cancelEvent=w,l.canCancelEvent=x}()}]})}(angular,window.top,window),function(a,b){a.module("app.eventDetails",["ngSanitize","skedApp.core","skedApp.shared","app.model","app.cancelEvent","ui.date","angular-click-outside"]).constant("HOME_STATUS",{STABILIZED:"Stabilized"}).constant("PAGE_MODE",{CREATE:"CREATE_TOUR",EDIT:"EDIT_TOUR"}).constant("ERROR_MESSAGES",{COMMON_ERROR:"Something went wrong. Please try again later."}).constant("DEFAULT_PHOTO_URL","slds/images/avatar1.jpg").config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}])}(angular,top),function(a,b){a.module("app.eventDetails").component("allocationModal",{templateUrl:"src/app/event-details/allocation-modal-template.html",bindings:{config:"<?",event:"<?",pageMode:"<?",timeSlot:"<?",onClose:"&"},controller:["HOME_STATUS","ERROR_MESSAGES","DEFAULT_PHOTO_URL","PAGE_MODE","$scope","$timeout","$window","$location","$q","$filter","api","util","dateUtil","model",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this,d=k("skedSfUrl")(d),q={pageSizeOptions:[15,20,25,50]},r=function(a){return m.toastError("Can not perform action due to server error."),j.reject(a)},s=function(){if(!p.event||!p.timeSlot||!p.region)return j.reject(c.COMMON_ERROR);var a=p.event.toServer(),b={regionId:p.region.id,homeId:a.home?a.home.id:null,timezone:p.region.timezoneSidId,startDate:p.timeSlot.dateISO,endDate:p.timeSlot.dateISO,intStartTime:p.timeSlot.startTime,intEndTime:p.timeSlot.endTime,duration:a.duration,latitude:a.jobLocation?a.jobLocation.latitude:null,longitude:a.jobLocation?a.jobLocation.longitude:null,eventIds:[]};return a.id&&b.eventIds.push(a.id),l.getAvailableResources(b).catch(r)},t=function(){p.contentLoading=!0},u=function(){p.contentLoading=!1},v=function(){return resources=p.allResources,p.filter?(m.isNullOrEmpty(p.filter.searchText)||(resources=_.filter(resources,function(a){return a.resource&&-1!==a.resource.name.toLowerCase().indexOf(p.filter.searchText.trim().toLowerCase())})),_.orderBy(resources,["distanceInMiles","travelTime"],["asc","asc"])):resources},w=function(a){return j.when().then(function(){return m.searchOptionsByName(p.config.regions,a)})},x=function(){return!(!p.selectedResources||!p.selectedResources.length)&&p.selectedResources.length>0},y=function(){return s().then(function(a){return a&&a.success?(p.allResources=o.ResourceAllocationModel.fromServerList(a.data,p.config),p.filteredResources=v(),p.filteredResources):j.reject(a)})},z=function(){p.filteredResources=v()},A=function(){if(!p.region)return void(p.allResources=p.filteredResources=[]);t(),p.getAvailableResources().then(function(){var b=a.copy(p.selectedResources);p.selectedResources=[],b&&b.length&&b.forEach(function(a){var b=_.find(p.allResources,{resourceId:a.resource.id});b&&(b.isSelected=!0,b.fetchDataFromAllocation(a),B(b))})}).finally(u)},B=function(a){_.remove(p.selectedResources,{resourceId:a.resource.id}),a.isSelected&&(a.status=a.status,p.selectedResources.push(a))},C=function(){var a=p.event,c=p.timeSlot,d=!1,e="YYYY-MM-DD Hmm";if(a.home&&a.home.status===b.STABILIZED){var f=moment(moment().tz(p.region.timezoneSidId).format(e),e),g=moment(c.dateISO+" "+c.startTime,e),h=p.config.stabilizedHomeScheduledTime;p.config.specialRegions&&p.config.specialRegions.length&&-1!==p.config.specialRegions.indexOf(a.region.name)&&(h=p.config.specialStabilizedHomeScheduledTime),d=Math.abs(g.diff(f,"hours"))>=h}else d=!0;return{passed:d,warningMessage:"This Tour is scheduled to be within "+h+" hours. Please Confirm."}},D=function(){var a=C();a.passed?F("save"):m.confirm({title:"Confirm",message:a.warningMessage}).then(function(a){F("save")}).catch(function(a){})},E=function(){var a=function(){p.newWindow=window.open("","_blank"),p.newWindow.document.write("Server is processing. Please wait..."),F("saveAndView")},b=C();b.passed?a():m.confirm({title:"Confirm",message:b.warningMessage}).then(function(b){a()}).catch(function(a){})},F=function(b){b||(b="cancel"),p.isModalOpen=!1,a.isFunction(p.onClose)&&p.onClose({message:b,allocations:p.selectedResources,newWindow:p.newWindow})};p.$onInit=function(){p.config=_.extend({},q,p.config),p.region=p.event?p.event.region:null,p.latestRegion=a.copy(p.region),p.region&&(t(),p.getAvailableResources().then(function(){p.event&&p.event.allocations&&p.event.allocations.length&&p.event.dateOfEvent===p.timeSlot.dateISO&&p.event.startTime===p.timeSlot.startTime&&p.event.endTime===p.timeSlot.endTime&&p.event.allocations.forEach(function(a){var b=_.find(p.allResources,{resourceId:a.resource.id});b&&(b.isSelected=!0,b.fetchDataFromAllocation(a),p.onResourceSelected(b))})}).finally(u)),g(function(){p.isModalOpen=!0},0)},function(){f.DEFAULT_PHOTO_URL=d,p.newWindow=null,p.latestRegion=null,p.region=null,p.selectedResources=[],p.allResources=[],p.filteredResources=[],p.paging={pageNumber:1,totalPages:1,pageSize:20,numberOfPagesArray:[]},p.filter={searchText:""},p.isModalOpen=!1,p.contentLoading=!1,p.closeModal=F,p.searchRegions=w,p.getAvailableResources=y,p.onRegionChanged=A,p.onSearchTextChanged=z,p.onResourceSelected=B,p.isAbleToAssignResources=x,p.saveEvent=D,p.saveEventAndView=E}()}]})}(angular,top),function(a,b){a.module("app.eventDetails").component("eventList",{templateUrl:"src/app/event-details/event-list-template.html",bindings:{},controller:["$scope","$timeout","$window","$location","$q","$filter","api","util","dateUtil","model",function(c,d,e,f,g,h,i,j,k,l){var m=this,n=f.search(),o={pageSizeOptions:[15,20,25,50]},p={QUEUED:"Queued",PENDING_ALLOCATION:"Pending Allocation",PENDING_DISPATCH:"Pending Dispatch",DISPATCHED:"Dispatched",READY:"Ready",EN_ROUTE:"En Route",ON_SITE:"On Site",IN_PROGRESS:"In Progress",COMPLETE:"Complete",CANCELLED:"Cancelled"},q=function(a){return j.toastError("Can not perform action due to server error."),g.reject(a)},r=function(){return i.getDataConfig().catch(q)},s=function(){var a=m.accountId||"";return i.getTourList(a).catch(q)},t=function(){m.contentLoading=!0},u=function(){m.contentLoading=!1},v=function(c,d){b&&b.postMessage&&b.postMessage(a.extend({message:c},d),m.parentDomain)},w=function(a){m.isModalOpen=!1,v(a||"cancel")},x=function(a){a&&j.showModal({template:'<cancel-event class="sked-modal-container" config="config" event-id="eventId" cancelled="cancelled" job-status="jobStatus" allow-posting-message="false" on-close="onClose(message, this)"></event-details>'},{config:m.config,eventId:a.id,cancelled:!!a.cancelled,jobStatus:a.jobStatus,onClose:function(a,b){b.closeModal(),"done"===a&&A()}})},y=function(a){a&&j.showModal({template:'<event-details class="sked-modal-container" account-id="accountId" event-id="eventId" allow-posting-message="false" on-close="onClose(message, this)"></event-details>'},{eventId:a.jobId,accountId:m.accountId,onClose:function(a,b){b.closeModal(),"done"===a&&A()}})},z=function(){return r().then(function(a){return a&&a.success?(m.config=l.EventDetailConfigModel.fromServer(a.data),m.config):g.reject(a)})},A=function(){return t(),s().then(function(a){return a&&a.success?(m.events=l.EventInListModel.fromServerList(a.data),m.events):g.reject(a)}).finally(u)},B=function(a){var b=[p.CANCELLED,p.COMPLETE,p.IN_PROGRESS];return a.id&&!a.cancelled&&-1===b.indexOf(a.jobStatus)},C=function(a){var b=[p.CANCELLED,p.COMPLETE];return a.id&&!a.cancelled&&-1===b.indexOf(a.jobStatus)};m.$onInit=function(){t(),g.all([z(),A()]).then(function(){m.config=_.extend(m.config,o)}).finally(function(){u()}),v("loaded"),d(function(){m.isModalOpen=!0},0)},function(){m.config=a.copy(o),m.events=[],m.paging={pageNumber:1,totalPages:1,pageSize:20,numberOfPagesArray:[]},m.isModalOpen=!1,m.contentLoading=!1,m.closeModal=w,m.openCancelEventModal=x,m.openEventDetailsModal=y,m.isEventEditable=C,m.isEventCancellable=B,m.accountId=n.accountId,m.parentDomain=n.parent_domain||"*"}()}]})}(angular,top),function(a,b,c,d){a.module("app.eventDetails").component("eventDetails",{templateUrl:"src/app/event-details/event-details-template.html",bindings:{allowPostingMessage:"<?",eventId:"<?",accountId:"<?",onClose:"&?"},controller:["HOME_STATUS","DEFAULT_PHOTO_URL","PAGE_MODE","$scope","$timeout","$window","$location","$q","$filter","api","util","dateUtil","model",function(c,e,f,g,h,i,j,k,l,m,n,o,p){var q=this,r=1,e=l("skedSfUrl")(e),s=/^([0-9]*)$/,f=f,t=[{title:"Booking Grid build",titleInEditMode:"Booking Grid build",templateUrl:"src/app/event-details/booking-grid-template.html"}],u={},v=j.search(),w={showAnim:"",dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],showOtherMonths:!0,beforeShow:function(a,b){b.dpDiv.addClass("week-picker"),h(function(){b.dpDiv.find("tr:has(td.ui-datepicker-current-day) .ui-state-default").addClass("ui-state-co-active")})},onChangeMonthYear:function(a,b,c){h(function(){c.dpDiv.find("tr:has(td.ui-datepicker-current-day) .ui-state-default").addClass("ui-state-co-active")},0)},onClose:function(a,b){}},x=function(a){var b=o.calculateWeekDay(a),c=!(u.startDate===b.start),d=!(u.endDate===b.end);return c||d},y=function(a){return a!==u.offsetTime},z=function(a){a.allocations=[],a.dateOfEvent=null,a.startTime=null,a.endTime=null},A=function(b,c,d){b.allocations=a.copy(d),b.dateOfEvent=c.dateISO,b.startTime=c.startTime,b.endTime=c.endTime},B=function(a,b,c,d,e,f,g,h,i){var j=function(){var a=!1;return!u.address&&e||u.address&&!e?a=!0:u.address&&e&&(u.address.fullAddress!==e.fullAddress?a=!0:u.address.latitude===e.latitude&&u.address.longitude===e.longitude||(a=!0)),a},k=u.offsetTime!==b,l=o.sumDuration(u.durationInHours,u.durationInMinutes)!==o.sumDuration(c,d),m=j(),n=!!(!u.home&&g||u.home&&!g||u.home&&g&&u.home.id!==g.id);return isSuiteChanged=!!(!u.suite&&h||u.suite&&!h||u.suite&&h&&u.suite.id!==h.id),isRoomChanged=!!(!u.room&&i||u.room&&!i||u.room&&i&&u.room.id!==i.id),isRegionChanged=!!(!u.region&&f||u.region&&!f||u.region&&f&&u.region.id!==f.id),x(a)||k||l||m||n||isSuiteChanged||isRoomChanged||isRegionChanged},C=function(){q.calendar.date=o.addDay(q.calendar.date,-7*r)},D=function(){q.calendar.date=o.addDay(q.calendar.date,7*r)},E=function(){q.calendar.date=moment().startOf("day").toDate()},F=function(b){var c=a.element(b);c&&c.length>0&&h(function(){c[0].focus()},10)},G=function(a){a.region&&(a.region=d.find(q.config.regions,{id:a.region.id}))},H=function(){return m.getDataConfig().catch(T)},I=function(){var a=q.searchParams.accountId||"";return m.getAccountData(a).catch(T)},J=function(){var a=q.searchParams.eventId||"";return m.getJobDetails(a).catch(T)},K=function(a,b){return m.getGeolocation(a,b).catch(T)},L=function(a,b){return m.searchHomes(a,b).catch(T)},M=function(a,b){return m.searchSuites(a,b).catch(T)},N=function(a,b,c){return m.searchRooms(a,b,c).catch(T)},O=function(a){return m.searchAccounts(a).catch(T)},P=function(a){return m.searchContacts(a).catch(T)},Q=function(a){return m.saveJob(a).catch(T)},R=function(a){return m.getBookingGridData(a).catch(T)},S=function(a,b){n.showModal({templateUrl:"src/app/event-details/error-prompt-template.html",noBackdrop:!!b},{message:a,closePrompt:function(a){a.closeModal(),X("cancel")}})},T=function(a){return a&&a.errorMessage,n.toastError("Can not perform action due to server error."),k.reject(a)},U=function(){q.contentLoading=!0},V=function(){q.contentLoading=!1},W=function(c,d){q.allowPostingMessage&&b&&b.postMessage&&b.postMessage(a.extend({message:c},d),q.searchParams.parentDomain)},X=function(b){b||(b="cancel"),"cancel"===b&&q.eventUpdated&&(b="done"),q.isModalOpen=!1,W(b,q.event),a.isFunction(q.onClose)&&q.onClose({message:b})},Y=function(a){return a=a||"",n.isNullOrEmpty(a)?k.when().then(function(){return[]}):m.searchAddresses(a).then(function(a){return a&&a.success?p.AddressModel.fromServerList(a.data):k.reject(a)}).catch(T)},Z=function(a){return k.when().then(function(){return n.searchOptionsByName(q.config.regions,a)})},$=function(a){return a=a||"",O(a).then(function(a){return p.PickListItemModel.fromServerList(a.data)})},_=function(a,b){return b&&b.id?(a=a||"",L(a,b.id).then(function(a){return p.HomeModel.fromServerList(a.data)})):n.toastWarning("Please select Region first.")},aa=function(a,b){return b&&b.id?(a=a||"",M(a,b.id).then(function(a){return p.PickListItemModel.fromServerList(a.data)})):n.toastWarning("Please select Home first.")},ba=function(a,b,c){return b&&b.id?(a=a||"",N(a,b.id,c?c.id:"").then(function(a){return p.PickListItemModel.fromServerList(a.data)})):n.toastWarning("Please select Home first.")},ca=function(a){return a=a||"",P(a).then(function(a){return p.PickListItemModel.fromServerList(a.data)})},da=function(){q.needFillJobDetails=!1,ja()?ia(!0,!1):q.needFillJobDetails=!0},ea=function(a){return a&&!n.isNullOrEmpty(a.fullAddress)&&!n.isNullOrEmpty(a.latitude)&&!n.isNullOrEmpty(a.longitude)},fa=function(){return!(!q.event||!q.config)&&o.sumDuration(q.event.durationInHours,q.event.durationInMinutes)>=q.config.minDuration},ga=function(a){return a&&!n.isNullOrEmpty(a.regionId)&&!n.isNullOrEmpty(a.timezone)&&!n.isNullOrEmpty(a.duration)&&!n.isNullOrEmpty(a.offsetTime)&&!n.isNullOrEmpty(a.latitude)&&!n.isNullOrEmpty(a.longitude)&&!n.isNullOrEmpty(a.startDate)&&!n.isNullOrEmpty(a.endDate)},ha=function(a){var b=o.calculateWeekDay(q.calendar.date);q.calendar.startDateOfWeek=b.start,q.calendar.endDateOfWeek=b.end},ia=function(b,c){if(q.needRefreshBookingGrid=!1,b||B(q.calendar.date,q.event.offsetTime,q.event.durationInHours,q.event.durationInMinutes,q.event.jobLocation,q.event.region,q.event.home,q.event.suite,q.event.room)){ha(),x(q.calendar.date)||y(q.event.offsetTime)?c=!1:(q.needRefreshBookingGrid=!0,c||q.ignoreClearJobAllocations||z(q.event)),q.ignoreClearJobAllocations&&(c=!1),u={date:a.copy(q.calendar.date),startDate:a.copy(q.calendar.startDateOfWeek),endDate:a.copy(q.calendar.endDateOfWeek),address:a.copy(q.event.jobLocation),region:a.copy(q.event.region),home:a.copy(q.event.home),room:a.copy(q.event.room),suite:a.copy(q.event.suite),offsetTime:q.event.offsetTime,durationInHours:q.event.durationInHours,durationInMinutes:q.event.durationInMinutes};var d=q.event.toServer(),e={regionId:d.region?d.region.id:null,homeId:d.home?d.home.id:null,roomId:d.room?d.room.id:null,suiteId:d.suite?d.suite.id:null,timezone:d.region?d.region.timezoneSidId:null,startDate:q.calendar.startDateOfWeek,endDate:q.calendar.endDateOfWeek,duration:d.duration,offsetTime:d.offsetTime,latitude:d.jobLocation?d.jobLocation.latitude:null,longitude:d.jobLocation?d.jobLocation.longitude:null,eventIds:[]};if(d.id&&e.eventIds.push(d.id),ga(e)){if(!c)return U(),R(e).then(function(a){if(!a.success||!a.data)return k.reject(a);q.needFillJobDetails=!1,q.needRefreshBookingGrid=!1,q.calendar.days=p.CalendarDayModel.fromServerList(a.data,q.config,q.event),q.ignoreClearJobAllocations=!1}).catch(function(a){console.log("doGetBookingGridData error",a),q.needFillJobDetails=!0}).finally(function(){V()})}else q.needFillJobDetails=!0,q.calendar.days=[]}},ja=function(){var a=q.form;return a.$setSubmitted(!0),!a.$error.required&&q.event.region&&q.event.jobLocation?a.$error.number||a.$error.pattern?(n.toastError("Invalid data format, please check all number fields."),!1):fa()?q.gettingGeolocation?(n.toastError("Checking address. Please try again later."),!1):ea(q.event.jobLocation)?!!a.$valid||(n.toastError("Unknown error"),!1):(n.toastError(q.getGeolocationErrorMessage||g.DEFAULT_IDENTITY_ADDRESS_ERROR_MESSAGE),q.getGeolocationError=!0,!1):(n.toastError("Total duration (minutes) must be more than "+q.config.minDuration),!1):(n.toastError("Please check all required fields."),!1)},ka=function(){var a=q.form;a&&a.$setPristine(),q.pageMode=f.EDIT,q.ignoreClearJobAllocations=!0,ia(!0,!1)},la=function(a){a.isAvailable&&!a.isTourBooked&&sa(a)},ma=function(){var a=59;Number(q.event.offsetTime)>a&&(q.event.offsetTime=a),Number(q.event.offsetTime)<0&&(q.event.offsetTime=0),q.event.offsetTime=Math.floor(q.event.offsetTime)},na=function(){var a=23;Number(q.event.durationInHours)>a&&(q.event.durationInHours=a),Number(q.event.durationInHours)<0&&(q.event.durationInHours=0),q.event.durationInHours=Math.floor(q.event.durationInHours)},oa=function(){var a=59;Number(q.event.durationInMinutes)>a&&(q.event.durationInMinutes=a),Number(q.event.durationInMinutes)<0&&(q.event.durationInMinutes=0),q.event.durationInMinutes=Math.floor(q.event.durationInMinutes)},pa=function(){q.event&&(q.event.home=null,q.event.suite=null,q.event.room=null)},qa=function(){q.event&&(q.event.home&&q.event.home.address&&q.event.home.address.fullAddress&&(q.event.jobLocation=a.copy(q.event.home.address)),q.event.suite=null,q.event.room=null)},ra=function(){q.event&&(q.event.room=null)},sa=function(a){n.showModal({template:'<allocation-modal config="config" event="event" page-mode="pageMode" time-slot="timeSlot" on-close="onClose(message, allocations, newWindow, this)"></allocation-modal>'},{config:q.config,event:q.event,pageMode:q.pageMode,timeSlot:a,onClose:function(b,c,d,e){e.closeModal(),"save"!==b&&"saveAndView"!==b||(A(q.event,a,c),ta().then(function(){if("saveAndView"===b&&d&&(d.location=q.config.jobURL+q.event.id),q.pageMode===f.CREATE)return void X("done");ka()}).catch(function(a){d&&d.close()}))}})},ta=function(){var a;return ja()?(U(),a=q.event.toServer(),Q(a).then(function(a){if(!a.success)return k.reject(a);q.event=p.EventModel.fromServer(a.data,q.config),q.searchParams.eventId=q.event.id,q.eventUpdated=!0,q.pageMode===g.PAGE_MODE.CREATE?n.toastSuccess("Job has been created successfully"):q.pageMode===g.PAGE_MODE.EDIT&&n.toastSuccess("Job has been updated successfully")}).catch(function(a){n.toastError(a.message)}).finally(function(){V()})):k.reject("Validate Event Failed")},ua=function(){return H().then(function(a){return a&&a.success?(q.config=p.EventDetailConfigModel.fromServer(a.data),a):k.reject(a)})},va=function(){return I().then(function(a){return a&&a.success?(q.accountData=p.AccountModel.fromServer(a.data),q.getAccountData):k.reject(a)})},wa=function(){return U(),J().then(function(a){return a&&a.success?(q.event=p.EventModel.fromServer(a.data,q.config),G(q.event),q.calendar.date=o.parseDateString(q.event.dateOfEvent),ha(),q.event):k.reject(a)}).finally(V)};q.$onInit=function(){q.searchParams={eventId:q.eventId||v.eventId,accountId:v.accountId,parentDomain:v.parent_domain||"*"},q.pageMode=n.isNullOrEmpty(q.searchParams.eventId)?f.CREATE:f.EDIT;var b=[];q.pageMode&&(q.pageMode===f.CREATE&&q.searchParams.accountId||q.pageMode===f.EDIT&&q.searchParams.eventId)?(U(),b.push(ua()),q.pageMode===f.EDIT?(q.ignoreClearJobAllocations=!0,b.push(wa())):q.pageMode===f.CREATE&&b.push(va()),k.all(b).then(function(b){if(q.pageMode===f.CREATE){if(q.event=new p.EventModel,q.event.dateOfEvent=o.dateToString(moment().toDate()),q.event.account=p.AccountModel.fromServer(q.accountData),q.event.durationInHours=o.splitDuration(q.config.defaultDuration).hour,q.event.durationInMinutes=o.splitDuration(q.config.defaultDuration).minute,q.accountData&&(q.event.contact=a.copy(q.accountData.contact),q.event.region=a.copy(q.accountData.region),q.event.jobLocation=a.copy(q.accountData.jobLocation)),q.config&&q.config.jobTypes){var c=d.find(q.config.jobTypes,{selected:!0});c||(c=d.first(q.config.jobTypes)),q.event.jobType=c?c.id:null}if(q.config&&q.config.tourTypes){var e=d.find(q.config.tourTypes,{selected:!0});e||(e=d.first(q.config.tourTypes)),q.event.tourType=e?e.id:null}}}).catch(function(a){a&&a.message&&S(a.message)}).finally(function(){V()}),h(function(){q.isModalOpen=!0},0)):S("Page condition is invalid. Please check page parameters again.",!0),W("loaded")},function(){g.STEPS=t,g.INTEGER_PATTERN=s,g.DEFAULT_PHOTO_URL=e,g.PAGE_MODE=f,g.DEFAULT_IDENTITY_ADDRESS_ERROR_MESSAGE="Could not identify this address",q.event=new p.EventModel,q.calendar={date:moment().toDate()},ha(),q.weekPickerOptions=w,q.isModalOpen=!1,q.contentLoading=!1,q.gettingGeolocation=!1,q.getGeolocationError=!1,q.getGeolocationErrorMessage=null,q.ignoreClearJobAllocations=!1,q.needRefreshBookingGrid=!1,q.needFillJobDetails=!1,q.searchParams={},q.eventUpdated=!1,q.pageMode=f.CREATE,q.activeStepIndex=0,q.closeModal=X,q.searchRegions=Z,q.searchAddresses=Y,q.searchContacts=ca,q.searchAccounts=$,q.searchHomes=_,q.searchSuites=aa,q.searchRooms=ba,q.saveEvent=ta,q.applyBookingGrid=da,q.onDurationInMinutesChanged=oa,q.onDurationInHoursChanged=na,q.onOffsetTimeChanged=ma,q.isTotalDurationValid=fa,q.onRegionChanged=pa,q.onHomeChanged=qa,q.onSuiteChanged=ra,q.moveCalendarBack=C,q.moveCalendarNext=D,q.resetCalendarDate=E,q.focusInput=F,q.onTimeSlotClicked=la,q.openResourceAllocationModal=sa,g.$watch("$ctrl.event.jobLocation",function(a){q.getGeolocationError=!1,a&&!ea(a)&&a instanceof p.AddressModel&&(q.gettingGeolocation=!0,U(),K(a.fullAddress,a.placeId||"").then(function(b){b&&b.success&&b.data?(q.getGeolocationError=!1,a.latitude=b.data.latitude,a.longitude=b.data.longitude):(q.getGeolocationError=!0,q.getGeolocationErrorMessage=b?b.errorMessage||g.DEFAULT_IDENTITY_ADDRESS_ERROR_MESSAGE:g.DEFAULT_IDENTITY_ADDRESS_ERROR_MESSAGE)}).catch(function(){q.getGeolocationError=!0,q.getGeolocationErrorMessage=g.DEFAULT_ADDRESS_TIME_ZONE_ERROR_MESSAGE}).finally(function(){V(),q.gettingGeolocation=!1}))}),g.$watch(function(){return{date:q.calendar.date,region:q.event.region,home:q.event.home,suite:q.event.suite,room:q.event.room,address:q.event.jobLocation,durationInHours:q.event.durationInHours,offsetTime:q.event.offsetTime,durationInMinutes:q.event.durationInMinutes}},function(b,c){b&&a.isDate(b.date)&&ia(!1,!0)},!0)}()}]})}(angular,window.top,window,_),function(a){a.module("app.eventDetails").directive("dockedCalendarHeader",["$timeout","$window",function(b,c){return function(d,e,f){var g,h,i=e.offset().top,j=a.element(c),k=a.element(f.dockedContainer),l=a.element(f.scrollableContainer),m=!1,n=l.width();parentWidthChanged=!1;var o=function(a){var b=l.scrollTop();parentWidthChanged=n!==l.width(),b>=i-g&&(!1===m||parentWidthChanged)?(m=!0,h||(h=e.clone(),h.css({position:"absolute",width:e.width(),top:0,"z-index":2,left:k.outerWidth()-l.outerWidth()+(e.offset().left-l.offset().left)+"px"}),h.addClass("docked-calendar-header"),h.appendTo(k),e.on("scroll",function(){h.scrollLeft(this.scrollLeft)}),h.scrollLeft(e.scrollLeft())),parentWidthChanged&&(n=l.width(),h.width(e.width()),h.css("left",k.outerWidth()-l.outerWidth()+(e.offset().left-l.offset().left)+"px"),h.scrollLeft(e.scrollLeft()))):b<i-g&&!0===m&&(m=!1,h&&(h.remove(),h=null),e.off("scroll"))};l.on("scroll resize",o),j.on("resize",o),b(function(){i=e.offset().top,g=l.offset().top},0),j.trigger("resize")}}])}(angular),angular.module("app.eventDetails").run(["$templateCache",function(a){"use strict"
;a.put("src/app/event-details/allocation-modal-template.html",'<div role="dialog" tabindex="-1" class="ach-ed-page slds-modal" ng-class="{\'is-modal-open slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container ach-resource-allocation-modal"> <div class="slds-is-relative frozen-container slds-modal__body-wrapper"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="$ctrl.closeModal()"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">Select Resource(s)</h2> <div class="slds-grid slds-m-top--xx-small slds-align--absolute-center slds-text-color--weak ach-date-time-info"> <svg class="slds-icon slds-icon--x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left--xx-small slds-m-top--xxx-small slds-truncate">{{$ctrl.timeSlot.dateISO | date:\'EEE MMM dd, yyyy\'}} </div> <svg class="slds-icon slds-icon--x-small slds-m-left--small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#clock\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left--xx-small slds-m-top--xxx-small slds-truncate">{{$ctrl.timeSlot.startTime | skedTimeName}} - {{$ctrl.timeSlot.endTime | skedTimeName}} </div> </div> </div> <div class="slds-modal__content slds-p-around--medium frozen-container" style="min-height: 20rem; max-height: calc(100vh - 15rem)"> \x3c!-- paging --\x3e <div class="slds-grid slds-grid--vertical-align-end slds-m-bottom--small frozen-div"> <sked-input-lookup label="Region" name="region" model="$ctrl.region" search="$ctrl.searchRegions(searchString)" label-field="name" meta-field="types" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#location\' | skedSfUrl}}" on-change="$ctrl.onRegionChanged()" icon-class="slds-icon-standard-location" class="slds-size--3-of-12" is-required="true" is-invalid="!$ctrl.region"></sked-input-lookup> <sked-input label="Quick Search" model-options="{debounce: 300}" name="quickSearch" model="$ctrl.filter.searchText" on-change="$ctrl.onSearchTextChanged()" class="slds-size--4-of-12 slds-p-horizontal--small" placeholder="Search Resources by Name"></sked-input> <div class="slds-size--5-of-12"> <div class="slds-grid slds-grid--align-end"> <sked-paging record-count-options="$ctrl.config.pageSizeOptions" model="$ctrl.paging" list="$ctrl.filteredResources" page-nav-label="Page Number" record-number-label="# of Resources"></sked-paging> </div> </div> </div> <div class="slds-grid slds-grid--align-spread slds-p-around--xx-small slds-theme--shade frozen-div" ng-if="$ctrl.region && $ctrl.selectedResources.length"> <label class="slds-text-color--weak slds-text-body--small"> <span>Selected <strong>{{$ctrl.selectedResources.length || 0}}</strong> Resource<span ng-if="$ctrl.selectedResources.length > 1">s</span></span> </label> </div> <div class="slds-grid slds-p-around--x-small frozen-div slds-wrap slds-text-body--small" ng-if="$ctrl.region && $ctrl.selectedResources.length"> <div class="slds-m-right--xx-small slds-m-bottom--xx-small slds-pill" ng-repeat="allocation in $ctrl.selectedResources" style="margin-left:0"> <span class="slds-icon_container slds-pill__icon_container"> <img alt="Avatar" class="slds-avatar--x-small" ng-src="{{allocation.resource.photoUrl || DEFAULT_PHOTO_URL}}"> </span> <span class="slds-pill__label slds-m-left--xx-small">{{allocation.resource.name}} <span ng-if="allocation.status">({{allocation.status}})</span></span> <button class="slds-button slds-button--icon slds-pill__remove" title="Remove" ng-click="allocation.isSelected=false;$ctrl.onResourceSelected(allocation)"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Remove</span> </button> </div> </div> <div class="slds-grid slds-grid--align-spread slds-p-around--xx-small slds-theme--shade frozen-div"> <label class="slds-text-color--weak slds-text-body--small"> <span ng-if="$ctrl.region.id && $ctrl.filteredResources.length > 0">Showing <strong>{{(($ctrl.paging.pageNumber - 1) * $ctrl.paging.pageSize) + 1}}</strong> to <strong>{{($ctrl.filteredResources.length > ($ctrl.paging.pageNumber * $ctrl.paging.pageSize))?($ctrl.paging.pageNumber * $ctrl.paging.pageSize):$ctrl.filteredResources.length}}</strong> of <strong>{{$ctrl.filteredResources.length}}</strong> Resource<span ng-if="$ctrl.filteredResources.length > 1">s</span></span> <span ng-if="$ctrl.region.id && $ctrl.filteredResources.length === 0 && !$ctrl.contentLoading">No Resources Found</span> <span ng-if="$ctrl.region.id && $ctrl.filteredResources.length === 0 && $ctrl.contentLoading">Loading ...</span> <span ng-if="!$ctrl.region.id">Please select Region</span> </label> </div> <div class="scroll-div" ng-if="$ctrl.region"> <table class="slds-table slds-table--bordered slds-table--fixed-layout ach-resource-table slds-no-row-hover" ng-if="$ctrl.filteredResources.length > 0"> <tbody> <tr class="slds-hint-parent resource-row" ng-class="{\'allocated\': allocation.isSelected}" ng-repeat="allocation in $ctrl.filteredResources | limitTo : $ctrl.paging.pageSize : (($ctrl.paging.pageNumber - 1) * $ctrl.paging.pageSize)"> <td style="width: 3rem"> <div class="slds-checkbox_add-button" style="display: flex"> <input type="checkbox" class="slds-assistive-text" id="select-resource-{{allocation.resource.id}}" ng-model="allocation.isSelected" ng-change="$ctrl.onResourceSelected(allocation)" tabindex="-1"> <label for="select-resource-{{allocation.resource.id}}" class="slds-checkbox_faux"> </label> </div> </td> <td class="col-resource-info slds-is-relative" style="width: 40%"> <div class="slds-media slds-m-top--xx-small"> <div class="slds-media__figure"> <img alt="Avatar" class="slds-avatar--large" title="{{allocation.resource.name}}" ng-src="{{allocation.resource.photoUrl || DEFAULT_PHOTO_URL}}"> </div> <div class="slds-media__body"> <p class="slds-truncate ach-resource-name"><strong ng-attr-title="{{allocation.resource.name}}">{{allocation.resource.name}}</strong></p> <p class="slds-text-body--small availability-status slds-text-color_weak">{{allocation.resource.category}}</p> </div> </div> </td> <td class="col-time-info slds-text-body--small" style="width: 60%"> <p ng-if="allocation.noHomeAddress"><span class="text-blue">No Home Address</span></p> <p ng-if="!allocation.noHomeAddress && allocation.distanceText">Distance: <span class="text-blue">{{allocation.distanceText}}</span></p> <p ng-if="!allocation.noHomeAddress && allocation.travelTimeText">Travel Time: <span class="text-blue">{{allocation.travelTimeText}}</span></p> <p ng-if="allocation.flightRecommendation"> <span class="slds-pill"> <span class="slds-icon_container slds-icon-custom-20 slds-pill__icon_container"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/custom-sprite/svg/symbols.svg#custom20\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Prefer Booking Flight</span> </span> <span class="slds-pill__label">Prefer Booking Flight</span> </span> </p> </td> <td class="col-status-info slds-text-body--small" style="width: 10rem"> <span ng-if="allocation.isSelected && allocation.status" class="slds-badge" ng-style="{\'background-color\': allocation.getStatusColorSetting($ctrl.config).backgroundColor, \'color\': allocation.getStatusColorSetting($ctrl.config).color}">{{allocation.status}}</span> </td> </tr> </tbody> </table> </div> </div> <div class="slds-modal__footer"> <div class="slds-grid slds-grid_align-end slds-grid_vertical-align-center"> <div class="slds-col"> <div class="slds-grid slds-grid_vertical-align-center"> <button class="slds-button slds-button--neutral" type="button" ng-click="$ctrl.closeModal()">Close</button> <button class="slds-button slds-button--success" type="button" ng-disabled="!$ctrl.isAbleToAssignResources()" ng-click="$ctrl.saveEventAndView()">Dispatch &amp; View</button> <button class="slds-button slds-button--success" type="button" ng-disabled="!$ctrl.isAbleToAssignResources()" ng-click="$ctrl.saveEvent()">Dispatch</button> </div> </div> </div> </div> <div class="slds-spinner_container animate-spinner" style="border-radius:0.25rem" ng-show="$ctrl.contentLoading;"> <div role="status" class="slds-spinner slds-spinner--brand slds-spinner_medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> </div> </div> </div>'),a.put("src/app/event-details/booking-grid-template.html",'<script type="text/ng-template" id="job-info-popover"><div class="rac-popover slds-popover" style="width: 23rem;">\n    <div class="slds-popover__body">\n      <dl class="slds-popover__body-list">\n        <dd class="slds-tile">\n            <div class="slds-tile__detail">\n                <dl class="slds-dl--horizontal slds-text-body--small">\n                    <dt ng-repeat-start="(allocationIndex, allocation) in $data.event.allocations" style="width: auto" class="resource-info slds-dl--horizontal__label slds-text-color_weak"><p class="slds-truncate">Resource #{{allocationIndex + 1}}:</p></dt>\n                    <dd ng-repeat-end class="slds-dl--horizontal__detail slds-tile__meta resource-info">\n                      <p class="">\n                        <span class="slds-icon_container slds-pill__icon_container" ng-style="{\'border-color\': allocation.backgroundColor}">\n                          <img alt="Avatar" class="slds-avatar--x-small" ng-src="{{allocation.resource.photoUrl || $data.DEFAULT_PHOTO_URL}}">\n                        </span>{{allocation.resource.name}} ({{allocation.status}})\n                      </p>\n                    </dd>\n                </dl>\n            </div>\n        </dd>\n    </dl>\n    </div>\n  </div><\/script> <div class="slds-panel slds-grid ach-training-session-page" style="height: 100%; overflow: hidden"> <div class="slds-border--right slds-shrink-none slds-grow-none col-form slds-scrollable--y" ng-submitted ng-form="$ctrl.form"> <div class="slds-p-horizontal--medium slds-p-vertical--small slds-form--compound"> <div class="slds-form-element__row"> <sked-input type="select" select-options="item.id as item.label for item in $ctrl.config.jobTypes" label="Job Type" name="jobType" model="$ctrl.event.jobType" is-required="true"></sked-input> </div> <div class="slds-form-element__row"> <sked-input-lookup label="Region" name="region" model="$ctrl.event.region" search="$ctrl.searchRegions(searchString)" label-field="name" meta-field="types" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#location\' | skedSfUrl}}" icon-class="slds-icon-standard-location" is-required="true" on-change="$ctrl.onRegionChanged()" is-invalid="$ctrl.form.$submitted && !$ctrl.event.region"></sked-input-lookup> </div> <div class="slds-form-element__row slds-wrap"> <sked-input-lookup label="Address" name="address" model="$ctrl.event.jobLocation" search="$ctrl.searchAddresses(searchString)" label-field="fullAddress" meta-field="message" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#address\' | skedSfUrl}}" icon-class="slds-icon-standard-address" is-required="true" is-invalid="$ctrl.form.$submitted && (!$ctrl.event.jobLocation || $ctrl.getGeolocationError)"></sked-input-lookup> <div class="slds-text-body--small slds-size--1-of-1 slds-p-left--xx-small ach-location-meta" ng-if="$ctrl.event.jobLocation"> <div class="slds-grid slds-m-top--xx-small slds-grid--vertical-align-center slds-size--1-of-1" ng-if="$ctrl.gettingGeolocation"> <svg class="slds-icon slds-icon--xx-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#spinner\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left--xx-small slds-m-top--xxx-small slds-truncate">Identifiying address...</div> </div> <div class="slds-grid slds-m-top--xx-small slds-grid--vertical-align-center slds-size--1-of-1 success-location" ng-if="!$ctrl.gettingGeolocation && !$ctrl.getGeolocationError"> <svg class="slds-icon slds-icon--xx-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#success\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left--xx-small slds-m-top--xxx-small slds-truncate">Address is valid </div> </div> <div class="slds-grid slds-m-top--xx-small slds-grid--vertical-align-center slds-size--1-of-1 error-location" ng-if="!$ctrl.gettingGeolocation && $ctrl.getGeolocationError"> <svg class="slds-icon slds-icon--xx-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#error\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left--xx-small slds-m-top--xxx-small">{{$ctrl.getGeolocationErrorMessage}}</div> </div> </div> </div> <div class="slds-form-element__row"> <sked-input type="textarea" label="Description" rows="4" icon="{{\'slds/icons/utility-sprite/svg/symbols.svg#edit\' | skedSfUrl}}" name="description" max-length="5000" model="$ctrl.event.description"></sked-input> </div> <div class="slds-form-element__row"> <sked-input-lookup label="Account" name="account" model="$ctrl.event.account" search="$ctrl.searchAccounts(searchString)" label-field="name" meta-field="types" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#person_account\' | skedSfUrl}}" icon-class="slds-icon-standard-person-account"></sked-input-lookup> </div> <div class="slds-form-element__row"> <sked-input-lookup label="Contact" name="contact" model="$ctrl.event.contact" search="$ctrl.searchContacts(searchString)" label-field="name" meta-field="types" icon-url="{{\'slds/icons/standard-sprite/svg/symbols.svg#person_account\' | skedSfUrl}}" icon-class="slds-icon-standard-person-account"></sked-input-lookup> </div> <div class="slds-form-element__row"> <div class="slds-size_1-of-2 slds-p-right--xx-small" ng-class="{\'slds-has-error\': $ctrl.form.$submitted && ($ctrl.form.durationHours.$invalid || !$ctrl.isTotalDurationValid())}"> <sked-input type="number" pattern="INTEGER_PATTERN" min-value="0" max-value="23" model-options="{ allowInvalid : true}" is-required="true" label="Duration (hours)" name="durationHours" on-change="$ctrl.onDurationInHoursChanged()" icon="{{\'slds/icons/utility-sprite/svg/symbols.svg#clock\' | skedSfUrl}}" model="$ctrl.event.durationInHours"></sked-input> </div> <div class="slds-size_1-of-2 slds-p-left--xx-small" ng-class="{\'slds-has-error\': $ctrl.form.$submitted && ($ctrl.form.durationMinutes.$invalid || !$ctrl.isTotalDurationValid())}"> <sked-input type="number" pattern="INTEGER_PATTERN" min-value="0" max-value="59" model-options="{ allowInvalid : true}" is-required="true" label="Duration (minutes)" name="durationMinutes" on-change="$ctrl.onDurationInMinutesChanged()" icon="{{\'slds/icons/utility-sprite/svg/symbols.svg#clock\' | skedSfUrl}}" model="$ctrl.event.durationInMinutes"></sked-input> </div> </div> <div class="slds-form-element__row" style="height: 6rem"> </div> </div> </div> <div class="col-schedule slds-p-around--medium slds-scrollable--y"> <div class="slds-grid col-schedule-alert" ng-if="!$ctrl.contentLoading && ($ctrl.needFillJobDetails || $ctrl.needRefreshBookingGrid)"> <div ng-if="true" class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning" role="alert"> <span class="slds-assistive-text">warning</span> <span class="slds-icon_container slds-icon-utility-warning slds-m-right_x-small"> <svg class="slds-icon slds-icon_x-small" aria-hidden="true"> <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#warning\' | skedSfUrl}}"> </svg> </span> <h2> <span ng-if="$ctrl.needFillJobDetails">Please fill in Job Details and click <strong>Apply</strong> to begin using Booking Grid.</span> <span ng-if="!$ctrl.needFillJobDetails && $ctrl.needRefreshBookingGrid">Booking Grid has been changed. Please click <strong>Apply</strong> to refresh Booking Grid</span> </h2> </div> </div> <div class="col-schedule-overlay" ng-if="!$ctrl.contentLoading && ($ctrl.needFillJobDetails || $ctrl.needRefreshBookingGrid)"></div> \x3c!-- filter section --\x3e <div class="slds-grid slds-grid--align-end ach-calendar-filter" ng-class="{\'slds-m-top--x-large\': !$ctrl.contentLoading && ($ctrl.needFillJobDetails || $ctrl.needRefreshBookingGrid)}"> <div class="slds-size--1-of-2"> <div class="slds-form-element__row"> <div class="slds-size_1-of-1 slds-p-right--xx-small start-time-offset-input" ng-class="{\'slds-has-error\': $ctrl.form.$submitted && $ctrl.form.offsetTime.$invalid}"> <sked-input type="number" pattern="INTEGER_PATTERN" min-value="0" max-value="59" input-classes="display-inline-block" model-options="{ allowInvalid : true, debounce: 600 }" is-required="true" label="Start Time Offset (minutes)" name="offsetTime" on-change="$ctrl.onOffsetTimeChanged()" icon="{{\'slds/icons/utility-sprite/svg/symbols.svg#clock\' | skedSfUrl}}" model="$ctrl.event.offsetTime"></sked-input> </div> </div> </div> <div class="slds-size--1-of-2"> <div class="slds-grid slds-grid_align-end"> <input tabindex="-1" class="hidden-date-picker" id="hdDatePicker" ui-date="$ctrl.weekPickerOptions" ng-model="$ctrl.calendar.date"> <div class="slds-button-group sked-pagin-group"> <button class="slds-button slds-button_icon-border" ng-click="$ctrl.moveCalendarBack()" ng-disabled="$ctrl.contentLoading"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronleft\' | skedSfUrl}}"></use> </svg> </button> <button class="slds-button slds-button_neutral sked-date-button" ng-click="$ctrl.focusInput(\'#hdDatePicker\')"> <svg aria-hidden="true" class="slds-button__icon slds-button__icon_left calendar-icon" style="width:1rem;height: 1rem"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg> {{$ctrl.calendar.startDateOfWeek | date: \'MM/dd/yyyy\'}} - {{$ctrl.calendar.endDateOfWeek | date: \'MM/dd/yyyy\'}} </button> <button class="slds-button slds-button_icon-border" ng-click="$ctrl.moveCalendarNext()" ng-disabled="$ctrl.contentLoading"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronright\' | skedSfUrl}}"></use> </svg> </button> </div> <div class="slds-p-left_small"> <button class="slds-button slds-button_neutral" ng-click="$ctrl.resetCalendarDate()"> Today </button> </div> </div> </div> </div> \x3c!-- booking grid --\x3e <div class="slds-m-top--medium booking-grid" ng-if="!$ctrl.needFillJobDetails && $ctrl.calendar.days.length"> <div class="slds-grid booking-grid-header" docked-calendar-header="true" docked-container=".ach-training-session-page" scrollable-container=".col-schedule"> <div class="time-label"> &nbsp; </div> <div class="slds-size--1-of-7 day-label" ng-repeat="day in $ctrl.calendar.days"> <strong>{{day.shortDayOfWeekString}} <span class="slds-text-color_error" ng-if="day.isHoliday">(H)</span></strong> <br> <span>{{day.shortDateString}}</span> </div> </div> <div class="slds-grid booking-grid-body"> <div class="time-column"> <div class="time-slot-empty"></div> <div class="time-label" ng-repeat="timeSlot in $ctrl.calendar.days[0].timeSlots"> <span>{{timeSlot.startTimeString}}</span> <span class="slds-icon_container"> <svg class="slds-icon slds-icon--xxx-small slds-icon-text-light" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevrondown\' | skedSfUrl}}"></use> </svg> </span> <span>{{timeSlot.endTimeString}}</span> </div> </div> <div ng-repeat="day in $ctrl.calendar.days" class="grid-column slds-size--1-of-7" ng-class="{\'today\': day.isToday}"> <div class="time-slot-empty"></div> <div class="time-slot" ng-repeat="timeSlot in day.timeSlots" ng-mouseover="timeSlot.isHovered = true" ng-mouseleave="timeSlot.isHovered = false" ng-class="{\'available\': timeSlot.isAvailable, \'assigned\': timeSlot.isAssigned, \'exist-tour\': timeSlot.isTourBooked}"> <div ng-click="$ctrl.onTimeSlotClicked(timeSlot)" class="content" ng-style="{\'border-color\': timeSlot.color, \'color\': timeSlot.color, \'background-color\': timeSlot.backgroundColor}" sked-moving-popover="job-info-popover" sked-moving-popover-container=".ach-training-session-page" sked-moving-popover-ignore="!timeSlot.isAssigned || !$ctrl.event.allocations.length" sked-moving-popover-data="{event: $ctrl.event, DEFAULT_PHOTO_URL: DEFAULT_PHOTO_URL, config: $ctrl.config}"> <div class="slds-grid availability-info"> <svg class="slds-icon slds-icon--xx-small slds-m-top--xxx-small" aria-hidden="true" ng-style="{\'stroke\': timeSlot.color}"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#user\' | skedSfUrl}}"></use> </svg> <div class="slds-m-left--xx-small slds-text-body--small">{{timeSlot.numOfAvailableResources || 0}}/{{timeSlot.totalResources || 0}}</div> </div> <span class="slds-icon_container slds-p-around--xxx-small add-icon" ng-style="{\'border-color\': timeSlot.isHovered ? (timeSlot.isAssigned ? timeSlot.hoverColor : timeSlot.color) : (timeSlot.isAssigned ? timeSlot.hoverColor : timeSlot.color), \'color\': timeSlot.isHovered ? (timeSlot.isAssigned ? timeSlot.color : timeSlot.hoverColor) : (timeSlot.isAssigned ? timeSlot.hoverColor : timeSlot.color), \'background-color\': timeSlot.isHovered ? (timeSlot.isAssigned ? timeSlot.backgroundColor : timeSlot.hoverBackgroundColor) : (timeSlot.isAssigned ? timeSlot.hoverBackgroundColor : timeSlot.backgroundColor)}"> <svg class="slds-icon slds-icon--small" aria-hidden="true" ng-style="{\'stroke\': timeSlot.isHovered ? (timeSlot.isAssigned ? timeSlot.backgroundColor : timeSlot.hoverBackgroundColor) : (timeSlot.isAssigned ? timeSlot.hoverBackgroundColor : timeSlot.backgroundColor), \'fill\': timeSlot.isHovered ? (timeSlot.isAssigned ? timeSlot.color : timeSlot.hoverColor) : (timeSlot.isAssigned ? timeSlot.hoverColor : timeSlot.color)}"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#add\' | skedSfUrl}}"></use> </svg> </span> <div class="allocated-resource" ng-if="timeSlot.isAssigned"> <div class="slds-grid resource-info" ng-repeat="allocation in $ctrl.event.allocations"> \x3c!-- <svg class="slds-icon slds-icon--xx-small slds-m-top--xxx-small" aria-hidden="true">\n                    <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#user\' | skedSfUrl}}"></use>\n                  </svg>  --\x3e <span class="slds-icon_container slds-pill__icon_container" ng-style="{\'border-color\': allocation.backgroundColor}"> <img alt="Avatar" class="slds-avatar--x-small" ng-src="{{allocation.resource.photoUrl || DEFAULT_PHOTO_URL}}"> </span> <div class="slds-text-body--small slds-truncate">{{allocation.resource.name}}</div> </div> </div> <div class="allocated-resource" ng-if="timeSlot.isTourBooked"> <div class="slds-grid resource-info" style="justify-content: center"> <div class="slds-text-body--small slds-truncate">Booked</div> </div> </div> </div> </div> </div> </div> </div> </div> \x3c!-- loading spinner --\x3e <div class="slds-spinner_container" ng-show="$ctrl.contentLoading"> <div role="status" class="slds-spinner slds-spinner--brand slds-spinner--medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> </div>'),a.put("src/app/event-details/cancel-event-template.html",'<div role="dialog" tabindex="-1" class="ach-ed-page slds-modal" ng-class="{\'is-modal-open slds-fade-in-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="$ctrl.closeModal(\'cancel\')"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">Cancel Tour</h2> </div> <div class="slds-modal__content slds-p-around--medium slds-is-relative" style="min-height: auto"> <sked-input type="select" label="Please select reason for cancellation?" name="cancellationReason" model="$ctrl.cancellationReason" is-required="true" select-options="item as item.label for item in $ctrl.config.cancellationReasons"></sked-input> <sked-input type="textarea" class="slds-m-top--small" max-length="255" rows="5" ng-if="$ctrl.cancellationReason.requireComments" label="Cancellation Comments" name="comments" model="$ctrl.comments"></sked-input> \x3c!-- loading spinner --\x3e <div class="slds-spinner_container" ng-show="$ctrl.contentLoading"> <div role="status" class="slds-spinner slds-spinner--brand slds-spinner--medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button--neutral" ng-click="$ctrl.closeModal(\'cancel\')">Close</button> <button class="slds-button slds-button--brand" ng-disabled="$ctrl.contentLoading || !$ctrl.canCancelEvent()" ng-click="$ctrl.cancelEvent()">Confirm</button> </div> </div> </div>'),a.put("src/app/event-details/error-prompt-template.html",'<div role="alertdialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal--prompt" ng-init="scope=this"> <div class="slds-modal__container"> <div class="slds-modal__header slds-theme--error slds-theme--alert-texture"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="closePrompt(scope)"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium" id="prompt-heading-id">Service Unavailable</h2> </div> <div class="slds-modal__content slds-p-around--medium"> <p>{{message}}</p> </div> <div class="slds-modal__footer slds-theme--default"> <button class="slds-button slds-button--neutral" ng-click="closePrompt(scope)">Okay</button> </div> </div> </div>'),a.put("src/app/event-details/event-details-template.html",'<div role="dialog" tabindex="-1" class="ach-ed-page slds-modal slds-modal--large" ng-class="{\'is-modal-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <div class="sb-pd-page-header slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="$ctrl.closeModal($ctrl.closeModal(\'cancel\'))"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">{{$ctrl.pageMode === PAGE_MODE.EDIT ? STEPS[$ctrl.activeStepIndex].titleInEditMode : STEPS[$ctrl.activeStepIndex].title}}</h2> </div> <div class="slds-modal__content" style="height: 100%;overflow: hidden"> <div ng-include="STEPS[$ctrl.activeStepIndex].templateUrl" style="position: relative;height: 100%; overflow: hidden"></div> </div> <div class="slds-modal__footer slds-grid slds-grid--align-spread slds-p-horizontal--medium"> <div class="col-form slds-grid slds-grid--pull-padded-medium"> <button class="slds-button slds-button--neutral" ng-disabled="$ctrl.contentLoading" ng-click="$ctrl.closeModal(\'cancel\')"> Cancel </button> <button class="slds-button slds-button--brand" ng-click="$ctrl.applyBookingGrid()" ng-disabled="$ctrl.contentLoading" ng-if="$ctrl.needFillJobDetails || $ctrl.needRefreshBookingGrid"> <svg class="slds-button__icon slds-button__icon--left" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#check\' | skedSfUrl}}"></use> </svg>Apply </button> <button class="slds-button slds-button--success" ng-click="$ctrl.saveEvent()" ng-disabled="$ctrl.contentLoading || !$ctrl.event.allocations.length" ng-if="!$ctrl.needFillJobDetails && !$ctrl.needRefreshBookingGrid"> <svg class="slds-button__icon slds-button__icon--left" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#check\' | skedSfUrl}}"></use> </svg>Save </button> </div> </div> </div> </div>'),
a.put("src/app/event-details/event-list-template.html",'<div role="dialog" tabindex="-1" class="ach-ed-page ach-event-list-modal slds-modal slds-modal--large" ng-class="{\'is-modal-open\': $ctrl.isModalOpen}"> <div class="slds-modal__container"> <div class="sb-pd-page-header slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="$ctrl.closeModal()"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">Tours</h2> </div> <div class="slds-modal__content slds-p-around--medium frozen-container"> \x3c!-- paging --\x3e <div class="slds-grid slds-grid--vertical-align-end slds-m-bottom--medium slds-grid--align-end frozen-div"> <sked-paging record-count-options="$ctrl.config.pageSizeOptions" model="$ctrl.paging" list="$ctrl.events" page-nav-label="Page Number" record-number-label="# of Tours"></sked-paging> </div> \x3c!-- table --\x3e <div class="scroll-div"> <table class="slds-table slds-table--bordered slds-table--cell-buffer ach-event-table" ng-show="$ctrl.events.length > 0"> <thead> <tr class="slds-text-title--caps"> <th class="slds-truncate" title="Tour">Tour</th> <th class="slds-truncate" title="Home Name">Home Name</th> <th class="slds-truncate" title="Date">Date</th> <th class="slds-truncate" itle="Start Time">Start Time</th> <th class="slds-truncate" itle="End Time">End Time</th> <th class="slds-truncate" style="min-width: 100px" title="Job Status">Job Status</th> <th class="slds-truncate slds-text-align--center" title="Cancelled?">Cancelled?</th> <th class="slds-truncate" title="Toured By">Toured By</th> <th class="slds-truncate" style="width: 160px"></th> </tr> </thead> <tbody> <tr class="slds-hint-parent" ng-repeat="event in $ctrl.events | limitTo : $ctrl.paging.pageSize : (($ctrl.paging.pageNumber - 1) * $ctrl.paging.pageSize)"> <td><p class="slds-truncate" ng-attr-title="{{event.name}}"><a ng-href="/{{event.id}}" target="_blank">{{event.name}}</a></p></td> <td><p class="slds-truncate" ng-attr-title="{{event.homeName}}">{{event.homeName}}</p></td> <td><p class="slds-truncate" ng-attr-title="{{event.tourDate}}">{{event.tourDate}}</p></td> <td><p class="slds-truncate" ng-attr-title="{{event.startTime}}">{{event.startTime}}</p></td> <td><p class="slds-truncate" ng-attr-title="{{event.endTime}}">{{event.endTime}}</p></td> <td><p class="slds-truncate" ng-attr-title="{{event.jobStatus}}">{{event.jobStatus}}</p></td> <td class="slds-text-align--center"> <span ng-if="event.cancelled" class="slds-icon_container slds-icon-action-submit-for-approval slds-icon_container--circle" style="padding:0.25rem 0.325rem"> <svg class="slds-icon slds-icon--x-small" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/action-sprite/svg/symbols.svg#approval\' | skedSfUrl}}"></use> </svg> </span> </td> <td><p class="slds-truncate" ng-attr-title="{{event.touredBy}}">{{event.touredBy}}</p></td> <td class="col-button slds-text-align--right"> <button class="slds-button reschedule-event-button" ng-disabled="!$ctrl.isEventEditable(event)" ng-click="$ctrl.openEventDetailsModal(event)"> <svg class="slds-button__icon slds-button__icon--left" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#event\' | skedSfUrl}}"></use> </svg>Modify </button> <button class="slds-button cancel-event-button" ng-click="$ctrl.openCancelEventModal(event)" ng-disabled="!$ctrl.isEventCancellable(event)"> <svg class="slds-button__icon slds-button__icon--left" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg>Cancel </button> </td> </tr> </tbody> </table> </div> \x3c!-- loading spinner --\x3e <div class="slds-spinner_container" ng-show="$ctrl.contentLoading"> <div role="status" class="slds-spinner slds-spinner--brand slds-spinner--medium"> <span class="slds-assistive-text">Loading</span> <div class="slds-spinner__dot-a"></div> <div class="slds-spinner__dot-b"></div> </div> </div> </div> <div class="slds-modal__footer slds-grid slds-grid--align-end slds-p-horizontal--large"> <button class="slds-button slds-button--neutral" ng-click="$ctrl.closeModal(\'cancel\')">Close</button> </div> </div> </div>'),a.put("src/shared/confirm-modal-template.html",'<div class="slds-modal__container"> <div class="slds-modal__header"> <button class="slds-button slds-modal__close slds-button--icon-inverse" title="Close" ng-click="dismiss()"> <svg class="slds-button__icon slds-button__icon--large" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Close</span> </button> <h2 class="slds-text-heading--medium">{{title}}</h2> </div> <div class="slds-modal__content slds-p-around--medium"> <p>{{message}}</p> </div> <div class="slds-modal__footer"> <button class="slds-button slds-button--neutral" ng-click="dismiss()">Cancel</button> <button class="slds-button slds-button--brand" ng-click="confirm()">Confirm</button> </div> </div>'),a.put("src/shared/input-lookup-template.html",'<div class="slds-form-element slds-lookup" ng-class="{\'slds-is-open\': isOpen && searchResults && searchResults.length > 0, \'slds-has-error\': isInvalid}" click-outside="isOpen=false;"> <label class="slds-form-element__label" ng-if="label"> <abbr class="slds-required" title="required" ng-if="required">*</abbr> {{label}} </label> <div class="slds-form-element__control"> <div class="slds-pill_container" ng-show="model"> <span class="slds-pill slds-size--1-of-1"> <span class="slds-icon_container {{iconClass}} slds-pill__icon_container" ng-if="iconUrl"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{iconUrl}}"></use> </svg> <span class="slds-assistive-text">{{label}}</span> </span> <img ng-src="{{model[imageField] || defaultImage}}" class="slds-avatar--x-small" ng-if="imageField"> <span class="slds-pill__label slds-size--1-of-1 slds-m-left--x-small" title="{{model[labelField]}}">{{$eval(\'model.\' + labelField)}}</span> <button class="slds-button slds-button--icon slds-pill__remove" title="Remove" ng-click="resetLookupItem();focusLookupInput();" ng-hide="isReadonly"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Remove</span> </button> </span> </div> <div class="slds-input-has-icon slds-input-has-icon--left" ng-show="!model"> <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#search\' | skedSfUrl}}"></use> </svg> <input type="text" ng-attr-id="{{inputId}}" class="slds-input" ng-focus="isOpen=!isReadonly;((!isReadonly)?search():void());" ng-model="searchString" ng-model-options="{debounce: 250}" ng-change="search()" placeholder="{{placeholder}}" ng-readonly="isReadonly"> </div> </div> \x3c!-- lookup menu --\x3e <div class="slds-lookup__menu"> <ul class="slds-lookup__list" role="listbox"> <li role="presentation" ng-repeat="item in searchResults" ng-click="selectLookupItem(item);isOpen=false"> <span class="slds-lookup__item-action slds-media" role="option"> <svg class="slds-icon {{iconClass}} slds-icon--small slds-media__figure" aria-hidden="true" ng-if="iconUrl"> <use xlink:href="" ng-attr-xlink:href="{{iconUrl}}"></use> </svg> <img ng-src="{{item[imageField] || defaultImage}}" class="slds-avatar--small slds-m-right_x-small slds-m-top_xx-small" ng-if="imageField"> <div class="slds-media__body"> <div class="slds-lookup__result-text">{{$eval(\'item.\' + labelField)}}</div> <span class="slds-lookup__result-meta slds-text-body--small slds-truncate" ng-if="metaField">{{$eval(\'item.\' + metaField)}}</span> </div> </span> </li> </ul> </div> \x3c!-- end lookup menu --\x3e </div>'),a.put("src/shared/input-popup-template.html",'<div class="slds-form-element"> <label class="slds-form-element__label" ng-if="label">{{label}}</label> <div class="slds-form-element__control"> <div class="slds-input-has-icon slds-input-has-icon--left"> <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#new_window\' | skedSfUrl}}"></use> </svg> <input type="text" ng-attr-id="{{inputId}}" class="slds-input" ng-focus="openPopup();" ng-model="inputView"> </div> </div> </div>'),a.put("src/shared/input-tags-template.html",'<div class="slds-form-element slds-lookup" ng-class="{\'slds-is-open\': isOpen && searchResults && searchResults.length > 0}" click-outside="isOpen=false;"> <label class="slds-form-element__label" ng-if="label"><abbr ng-if="required" class="slds-required" title="required">*</abbr> {{label}}</label> <div class="slds-form-element__control"> <div class="slds-pill_container"> <div class="slds-m-left--xxx-small slds-m-bottom--xxx-small slds-pill" ng-repeat="tag in model"> <span class="slds-icon_container {{iconClass}} slds-pill__icon_container" ng-if="iconUrl"> <svg class="slds-icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{iconUrl}}"></use> </svg> <span class="slds-assistive-text">{{label}}</span> </span> <span class="slds-pill__label slds-size--1-of-1 slds-m-left--x-small" title="{{tag[labelField]}}">{{tag[labelField]}}</span> <button class="slds-button slds-button--icon slds-pill__remove" title="Remove" ng-click="removeTagAt($index)" ng-hide="isReadonly"> <svg class="slds-button__icon" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#close\' | skedSfUrl}}"></use> </svg> <span class="slds-assistive-text">Remove</span> </button> </div> <div class="slds-input-has-icon slds-input-has-icon--left" ng-hide="isReadonly"> <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#search\' | skedSfUrl}}"></use> </svg> <input type="text" ng-attr-id="{{inputId}}" class="slds-input slds-lookup__input slds-input--bare" ng-focus="isOpen=true;search();" ng-model="searchString" ng-model-options="{debounce: 250}" ng-change="search();"> </div> </div> </div> \x3c!-- lookup menu --\x3e <div class="slds-lookup__menu"> <ul class="slds-lookup__list" role="listbox"> <li role="presentation" ng-repeat="item in searchResults  | filter: filterAlreadySelectedTags" ng-click="addTag(item);focusLookupInput()"> <span class="slds-lookup__item-action slds-media" role="option"> <svg class="slds-icon {{iconClass}} slds-icon--x-small slds-media__figure" aria-hidden="true" ng-if="iconUrl"> <use xlink:href="" ng-attr-xlink:href="{{iconUrl}}"></use> </svg> <div class="slds-media__body"> <div class="slds-lookup__result-text">{{item[labelField]}}</div> </div> </span> </li> </ul> </div> \x3c!-- end lookup menu --\x3e </div>'),a.put("src/shared/multi-picklist-template.html",'<div class="slds-form-element slds-picklist slds-dropdown-trigger slds-dropdown-trigger--click" click-outside="isOpenned=false" ng-class="{\'slds-is-open\': isOpenned, \'slds-has-error\': isInvalid}"> <label class="slds-form-element__label" ng-if="label"><abbr ng-if="isRequired" class="slds-required" title="required">*</abbr> {{label}}</label> <div class="slds-form-element__control slds-select_container" ng-click="isOpenned=!isReadonly"> <input type="search" class="slds-lookup__search-input slds-input" ng-model="selectionLabel" readonly> </div> <div class="slds-dropdown slds-dropdown--{{listPosition || left}}"> <ul class="slds-dropdown__list slds-dropdown--length-5"> <li ng-repeat="option in optionList" ng-class="{\'slds-is-selected\': (selectedOptions.indexOf(option) !== -1)}" ng-click="toggleOptionSelection(option)"> <span class="slds-lookup__item-action slds-lookup__item-action--label"> <svg class="slds-icon slds-icon--selected slds-icon--x-small slds-icon-text-default slds-m-right--x-small slds-shrink-none" aria-hidden="true"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#check\' | skedSfUrl}}"></use> </svg> <span class="slds-truncate">{{getOptionLabel(option)}}</span> </span> </li> </ul> </div> </div>'),a.put("src/shared/pagin-template.html",'<div class="slds-grid slds-grid--vertical-align-end"> <div class="slds-form-element slds-m-right--small"> <label class="slds-form-element__label" ng-if="pageNavLabel">{{pageNavLabel}}</label> <div class="slds-button-group sked-pagin-group"> <button class="slds-button slds-button--icon-border" ng-disabled="model.pageNumber === 1" ng-click="goToPreviousPage()"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronleft\' | skedSfUrl}}"></use> </svg> </button> <div class="slds-form-element__control"> <div class="slds-select_container"> <select class="slds-select" ng-options="item as item for item in numberOfPagesArray" ng-model="model.pageNumber"> </select> </div> </div> <button class="slds-button slds-button--icon-border" ng-disabled="model.pageNumber === model.totalPages" ng-click="goToNextPage()"> <svg aria-hidden="true" class="slds-button__icon"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#chevronright\' | skedSfUrl}}"></use> </svg> </button> </div> </div> \x3c!-- <label class="slds-text-color--weak slds-text-body--small slds-m-right--small" >Record per Page</label> --\x3e <div class="slds-form-element"> <label class="slds-form-element__label" ng-if="recordNumberLabel">{{recordNumberLabel}}</label> <div class="slds-form-element__control"> <div class="slds-select_container"> <select class="slds-select" ng-options="item as item for item in recordCountOptions" ng-model="model.pageSize" ng-change="resetPaginInfo()"> </select> </div> </div> </div> </div>'),a.put("src/shared/toast-template.html",'<div class="slds-notify__content slds-grid"> <svg class="slds-icon slds-icon--small slds-m-right--small slds-col slds-no-flex"> <use xlink:href="" ng-attr-xlink:href="{{\'slds/icons/utility-sprite/svg/symbols.svg#\' + icon | skedSfUrl}}"></use> </svg> <div class="slds-col slds-align-middle"> <h2 class="slds-text-heading--small">{{message}}</h2> </div> </div>')}]);